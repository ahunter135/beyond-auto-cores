(function(){"use static";function blankDashboardController($scope,$location,overlayService,uSyncPublishService){function showSeedPopup(){var url=Umbraco.Sys.ServerVariables.uSyncPublisher.seedUrl;uSyncPublishService.getServerByUrl(url).then(function(result){showDialog(result.data)})}function showDialog(server){var overlay={title:"Seed from server",subtitle:"Get setting and content from another server",view:Umbraco.Sys.ServerVariables.uSyncPublisher.pluginPath+"overlay/overlayDialog.html",isModal:!0,mode:"Seed",options:{items:[{entityType:"IContent"}],serverAlias:server.alias,treeItem:null},disableBackdropClick:!0,disableEscKey:!0,skipFormValidation:!0,disableSubmitButton:!0,submitButtonLabel:"Continue",closeButtonLabel:"Close",submit:function(){this.isComplete!=null&&this.isComplete()?($scope.$broadcast("usync-publish-close"),overlayService.close()):this.moveToNext!=null&&this.moveToNext()},close:function(){overlayService.close()}};overlayService.open(overlay)}function init(){vm.setup=!1;vm.servers=[];vm.emptySite=!0;uSyncPublishService.hasContentOrMedia(!1).then(function(result){vm.emptySite=!result.data});vm.picked=!1;vm.syncSettings=!0;vm.syncContent=!0;vm.syncMedia=!0;vm.items=[];vm.options={};vm.headings={};vm.stepArgs={};vm.state={complete:!1,loading:!0,hideClose:!0,valid:!1,working:!1};vm.actionButton={state:"init",name:"Send"};uSyncPublishService.getServers("pull").then(function(result){vm.servers=result.data;checkServers(vm.servers)})}function checkServers(servers){servers.forEach(function(server){uSyncPublishService.checkServer(server.alias).then(function(result){vm.state.loading=!1;server.status=result.data})})}function onSelected(server){vm.server=server;vm.picked=!0}function performAction(){$scope.$broadcast("usync-publish-performAction")}function reset(){init()}function doSync(){vm.options={serverAlias:vm.server.alias,contentType:"settings",simple:!0};vm.items=[];vm.syncSettings&&(vm.items.push(makeRootItem("ContentTypes","document-type")),vm.items.push(makeRootItem("DocTypes","data-type")),vm.items.push(makeRootItem("MediaTypes","media-type")),vm.items.push(makeRootItem("Domains","domain")),vm.items.push(makeRootItem("MemberTypes","member-type")),vm.items.push(makeRootItem("DictionaryItems","dictionary-item")),vm.items.push(makeRootItem("Macros","macro")),vm.items.push(makeRootItem("Templates","template")),vm.items.push(makeRootItem("Languages","language","")));vm.syncContent&&(vm.items.push(makeRootItem("PublicAccess","protect")),vm.items.push(makeRootItem("Content","document")));vm.syncMedia&&vm.items.push(makeRootItem("Media","media"));vm.setup=!0}function makeRootItem(name,typename,empty=emptyGuid){return{udi:"umb://"+typename+"/"+empty,name:name,variants:[{name:name}]}}var vm=this,emptyGuid;vm.onSelected=onSelected;vm.performAction=performAction;vm.reset=reset;vm.doSync=doSync;emptyGuid="00000000-0000-0000-0000-000000000000";vm.mode="settingsPull";vm.showPopup=!1;$location.search().firstsync!==undefined&&(vm.showPopup=$location.search().firstsync=="true");vm.showSeedPopup=showSeedPopup;vm.showDialog=showDialog;vm.showPopup&&showSeedPopup();init()}angular.module("umbraco").controller("uSyncPublisherBlankDashboardController",blankDashboardController)})()