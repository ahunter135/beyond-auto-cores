"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5676],{5676:(C,h,r)=>{r.d(h,{E:()=>O});var l=r(5861),d=r(9),t=r(7631),s=r(2478),_=r(4190),P=r(3493),g=r(3364),v=r(1253),a=r(1065),c=r(6895),e=r(4719);function o(m,M){if(1&m&&(t.TgZ(0,"ion-select-option",17),t._uU(1),t.qZA()),2&m){const n=M.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.lotName)}}function i(m,M){1&m&&(t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",18),t._uU(3,"Item Fullness %"),t.qZA()()())}function u(m,M){if(1&m){const n=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-range",19),t.NdJ("ngModelChange",function(E){t.CHM(n);const f=t.oxw();return t.KtG(f.fullness=E)}),t.TgZ(3,"ion-text",20),t._uU(4,"0"),t.qZA(),t.TgZ(5,"ion-text",21),t._uU(6,"100"),t.qZA()()()()}if(2&m){const n=t.oxw();t.xp6(2),t.Q6J("ngModel",n.fullness)}}let O=(()=>{class m{constructor(n,p,E,f,L,D,I){this.modalCtrl=n,this.lotsService=p,this.codesService=E,this.photoGradeService=f,this.lotItemsService=L,this.loadingCtrl=D,this.router=I,this.isPhotoGrade=!1,this.fullness=100,this.codeDetails={codeId:0,converterName:"",originalPrice:0,fullnessPercentage:100}}ngOnInit(){var n=this;return(0,l.Z)(function*(){const p=yield n.loadingCtrl.create({message:"Getting list of lots."});p.present(),n.lots=yield n.lotsService.lots({pageNumber:1,pageSize:66955359,searchCategory:"isSubmitted",searchQuery:"false"}),n.lotId=Number(n.lotsService.selectedLot?.id)||0,n.codeDetails=n.isPhotoGrade?{codeId:n.photoGradeService.selectedPhotoGrade.codeId,converterName:n.photoGradeService.selectedPhotoGrade.converterName,originalPrice:n.photoGradeService.selectedPhotoGrade.price,fullnessPercentage:n.photoGradeService.selectedPhotoGrade.fullness}:{codeId:n.codesService.selectedCode.id,converterName:n.codesService.selectedCode.converterName,originalPrice:n.codesService.selectedCode.finalUnitPrice,fullnessPercentage:100},console.log(n.codesService.selectedCode),console.log(n.codeDetails),p.dismiss()})()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}add(){var n=this;return(0,l.Z)(function*(){const p=yield n.loadingCtrl.create({message:"Adding to lot ...."});p.present(),n.lotsService.setSelectedLot=n.lots.find(E=>Number(E.id)===n.lotId),yield n.lotItemsService.addCodeToLot({...n.codeDetails,lotId:n.lotId,originalPrice:n.isPhotoGrade?(0,d.q)(n.photoGradeService.selectedPhotoGrade.fullness,n.photoGradeService.selectedPhotoGrade.price):(0,d.q)(n.fullness,n.codesService.selectedCode.finalUnitPrice),fullnessPercentage:n.isPhotoGrade?n.photoGradeService.selectedPhotoGrade.fullness:n.fullness,photoGradeId:null!=n.photoGradeService.selectedPhotoGrade?n.photoGradeService.selectedPhotoGrade.photoGradeId:null}).finally(()=>{n.photoGradeService.setSelectedPhotoGrade=null}),p.dismiss(),n.router.navigate(["lot-list"]),n.modalCtrl.dismiss()})()}}return m.\u0275fac=function(n){return new(n||m)(t.Y36(s.IN),t.Y36(_.s),t.Y36(P.a),t.Y36(g.a),t.Y36(v.e),t.Y36(s.HT),t.Y36(a.F0))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-add-to-lot"]],inputs:{isPhotoGrade:"isPhotoGrade"},decls:27,vars:5,consts:[["mode","ios"],["slot","start"],[1,"paragraph-text-14-bold"],["slot","end"],["color","light",3,"click"],["name","close-outline"],[1,"lot-content"],["position","stacked black-500",1,"black-500","paragraph-text-14-bold"],["interface","action-sheet","placeholder","Select Lot",1,"lot-select","black-500",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"footer-group-button"],[1,"footer-button"],["color","dark",1,"ion-text-capitalize",3,"click"],[1,"add-lot-button",3,"click"],["src","/assets/icon/add-lot-icon.svg",1,"generic-add-icon","white"],[1,"white"],[3,"value"],["position","stacked",1,"black-500","paragraph-text-14-bold"],["mode","ios","pin","true","min","0","max","100","step","10",3,"ngModel","ngModelChange"],["slot","start",1,"black-500"],["slot","end",1,"black-500"]],template:function(n,p){1&n&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-buttons",1)(2,"ion-text",2),t._uU(3,"Add to Lot"),t.qZA()(),t.TgZ(4,"ion-buttons",3)(5,"ion-button",4),t.NdJ("click",function(){return p.cancel()}),t._UZ(6,"ion-icon",5),t.qZA()()(),t.TgZ(7,"ion-content",6)(8,"ion-grid")(9,"ion-row")(10,"ion-col")(11,"ion-label",7),t._uU(12,"Choose Lot"),t.qZA()()(),t.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-select",8),t.NdJ("ngModelChange",function(f){return p.lotId=f}),t.YNc(16,o,2,2,"ion-select-option",9),t.qZA()()(),t.YNc(17,i,4,0,"ion-row",10),t.YNc(18,u,7,1,"ion-row",10),t.qZA(),t.TgZ(19,"div",11)(20,"div",12)(21,"ion-button",13),t.NdJ("click",function(){return p.cancel()}),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"ion-button",14),t.NdJ("click",function(){return p.add()}),t._UZ(24,"ion-icon",15),t.TgZ(25,"ion-text",16),t._uU(26," Add to Lot"),t.qZA()()()()()),2&n&&(t.xp6(15),t.Q6J("ngModel",p.lotId),t.xp6(1),t.Q6J("ngForOf",p.lots),t.xp6(1),t.Q6J("ngIf",!p.isPhotoGrade),t.xp6(1),t.Q6J("ngIf",!p.isPhotoGrade),t.xp6(5),t.uIk("disabled",!p.lotId))},dependencies:[c.sg,c.O5,e.JJ,e.On,s.YG,s.Sm,s.wI,s.W2,s.jY,s.gu,s.Q$,s.I_,s.Nd,s.t9,s.n0,s.yW,s.sr,s.QI],styles:[".lot-content[_ngcontent-%COMP%]::part(background){--background: #fff}ion-item[_ngcontent-%COMP%]::part(native){border:0px}ion-toolbar[_ngcontent-%COMP%]{--background: rgb(255, 255, 255);--color: rgb(0, 0, 0);padding:13px;border-bottom:1px solid #EFF2F5}.lot-input[_ngcontent-%COMP%]{--background: #f3f7f9}ion-label[_ngcontent-%COMP%]{padding-bottom:16px}.lot-range[_ngcontent-%COMP%]{display:flex;width:100%}.footer-group-button[_ngcontent-%COMP%]{border-top:1px solid #EFF2F5;position:relative;width:100%;height:80px}.footer-button[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;bottom:5px}.add-lot-button[_ngcontent-%COMP%]{--background: #000;text-transform:capitalize;height:40px}ion-input[_ngcontent-%COMP%]{--background: #fff;border-radius:12px;--padding-start: 10px;--padding-end: 10px;--color: #000}.lot-select[_ngcontent-%COMP%]{background-color:#f3f7f9;padding:10px;border-radius:12px}ion-range[_ngcontent-%COMP%]{padding-top:0}.generic-add-icon[_ngcontent-%COMP%]{width:26px;height:26px;margin-right:5px}"]}),m})()},3493:(C,h,r)=>{r.d(h,{a:()=>v});var l=r(591),d=r(1737),t=r(4850),s=r(2868),_=r(7221),P=r(7631),g=r(1102);let v=(()=>{class a{constructor(e){this.rest=e,this.isLoadingMore=!1,this.selectCodeStateSubject=new l.X(null)}get selectedCode(){return this.selectCodeStateSubject.value}set setSelectedCode(e){this.selectCodeStateSubject.next(e)}codes(e){return this.rest.get({endpoint:"/codes",params:e})}nextCodes(e,o){return this.isLoadingMore=!0,this.rest.get({endpoint:e,server:"none",params:o}).pipe((0,t.U)(i=>{const{data:u,pagination:O}=i.body;return{data:u,pagination:O}}),(0,s.b)(()=>this.isLoadingMore=!1),(0,_.K)(i=>(0,d._)(i))).toPromise()}}return a.\u0275fac=function(e){return new(e||a)(P.LFG(g.v))},a.\u0275prov=P.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},1253:(C,h,r)=>{r.d(h,{e:()=>P});var l=r(1737),d=r(4850),t=r(7221),s=r(7631),_=r(1102);let P=(()=>{class g{constructor(a){this.rest=a}lotItems(a,c){return this.rest.get({endpoint:`/lots/${a}/items`,params:c}).pipe((0,d.U)(e=>{const{data:o}=e.body;return o})).toPromise()}addCodeToLot(a){return this.rest.post("/lotitems",a).pipe((0,d.U)(c=>{const{data:e}=c.body;return e}),(0,t.K)(c=>(0,l._)(c))).toPromise()}removeCodeInLot(a){return this.rest.delete(`/lotitems/${a}`).pipe((0,d.U)(c=>{const{data:e}=c.body;return e}),(0,t.K)(c=>(0,l._)(c))).toPromise()}lotItemsFullness(a,c){return this.rest.get({endpoint:`/lotitems/${a}/fullness`,params:c}).pipe((0,d.U)(e=>{const{data:o}=e.body;return o})).toPromise()}}return g.\u0275fac=function(a){return new(a||g)(s.LFG(_.v))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},4190:(C,h,r)=>{r.d(h,{s:()=>v});var l=r(4850),d=r(7221),t=r(2868),s=r(591),_=r(1737),P=r(7631),g=r(1102);let v=(()=>{class a{constructor(e){this.rest=e,this.isLoadingMore=!1,this.selectLotStateSubject=new s.X(null)}get selectedLot(){return this.selectLotStateSubject.value}set setSelectedLot(e){this.selectLotStateSubject.next(e)}lots(e){return this.rest.get({endpoint:"/lots",params:e}).pipe((0,l.U)(o=>{const{data:i}=o.body;return i}),(0,d.K)(o=>(0,_._)(o))).toPromise()}inventory(e){return this.rest.get({endpoint:"/lots/inventory",params:e}).pipe((0,l.U)(o=>{const{data:i,pagination:u}=o.body;return{data:i,pagination:u}}),(0,d.K)(o=>(0,_._)(o))).toPromise()}inventorySummary(e){return this.rest.get({endpoint:"/lots/inventorysummary",params:e}).pipe((0,l.U)(o=>{const{data:i,pagination:u}=o.body;return{data:i,pagination:u}}),(0,d.K)(o=>(0,_._)(o))).toPromise()}nextInventory(e){return this.isLoadingMore=!0,this.rest.get({endpoint:e,server:"none"}).pipe((0,l.U)(o=>{const{data:i,pagination:u}=o.body;return{data:i,pagination:u}}),(0,t.b)(()=>this.isLoadingMore=!1),(0,d.K)(o=>(0,_._)(o))).toPromise()}addlot(e){return this.rest.post("/lots",e).pipe((0,l.U)(o=>{const{data:i}=o.body;return i}),(0,d.K)(o=>(0,_._)(o))).toPromise()}updateLot(e){return this.rest.put("/lots",e).pipe((0,l.U)(o=>{const{data:i}=o.body;return i}),(0,d.K)(o=>(0,_._)(o))).toPromise()}deletelot(e){return this.rest.delete(`/lots/${e}`).pipe((0,l.U)(o=>{const{data:i}=o.body;return i}),(0,d.K)(o=>(0,_._)(o))).toPromise()}submitLot(e){return this.rest.post({endpoint:"/lots/submit",params:{lotId:e.lotId,businessName:e.businessName,email:e.email}},e.formData,!1,!0).pipe((0,l.U)(o=>{const{data:i}=o.body;return i}),(0,d.K)(o=>(0,_._)(o))).toPromise()}}return a.\u0275fac=function(e){return new(e||a)(P.LFG(g.v))},a.\u0275prov=P.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},3364:(C,h,r)=>{r.d(h,{a:()=>v});var l=r(591),d=r(1737),t=r(4850),s=r(7221),_=r(2868),P=r(7631),g=r(1102);let v=(()=>{class a{constructor(e){this.rest=e,this.isLoadingMore=!1,this.selectPhotoGradeStateSubject=new l.X(null)}get selectedPhotoGrade(){return this.selectPhotoGradeStateSubject.value}set setSelectedPhotoGrade(e){this.selectPhotoGradeStateSubject.next(e)}submitPhotoGrade(e){return this.rest.post({endpoint:"/photogrades",params:{fullNess:e.fullNess,comments:e.notes}},e.formData,!1,!0).pipe((0,t.U)(o=>{const{data:i}=o.body;return i}),(0,s.K)(o=>(0,d._)(o))).toPromise()}photoGradeList(e){return this.rest.get({endpoint:"/photogrades",params:e}).pipe((0,t.U)(o=>{const{data:i,pagination:u}=o.body;return{data:i,pagination:u}}),(0,s.K)(o=>(0,d._)(o))).toPromise()}photoGradeCompletedList(e){return this.rest.get({endpoint:"/photogrades/completed",params:e}).pipe((0,t.U)(o=>{const{data:i,pagination:u}=o.body;return{data:i,pagination:u}}),(0,s.K)(o=>(0,d._)(o))).toPromise()}photoGrade(e){return this.rest.get({endpoint:`/photogrades/${e}`}).pipe((0,t.U)(o=>{const{data:i}=o.body;return i}),(0,s.K)(o=>(0,d._)(o))).toPromise()}photoGradeImgUrl(e){return this.rest.get({endpoint:"/photogrades/presigned-url",params:{fileKey:e}}).pipe((0,t.U)(o=>{const{data:i}=o.body;return i}),(0,s.K)(o=>(0,d._)(o))).toPromise()}nextPhotoGrade(e){return this.isLoadingMore=!0,this.rest.get({endpoint:e,server:"none"}).pipe((0,t.U)(o=>{const{data:i,pagination:u}=o.body;return{data:i,pagination:u}}),(0,_.b)(()=>this.isLoadingMore=!1),(0,s.K)(o=>(0,d._)(o))).toPromise()}deletePhotoGrade(e){return this.rest.delete(`/photogrades/${e}`).pipe((0,t.U)(o=>{const{data:i}=o.body;return i}),(0,s.K)(o=>(0,d._)(o))).toPromise()}}return a.\u0275fac=function(e){return new(e||a)(P.LFG(g.v))},a.\u0275prov=P.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},9:(C,h,r)=>{r.d(h,{O:()=>l,q:()=>d});const l=t=>{const s=Math.round(t);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)},d=(t,s)=>parseFloat((s*(t/100)).toFixed(0))}}]);