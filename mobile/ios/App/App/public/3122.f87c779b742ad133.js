"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3122],{3122:(A,g,i)=>{i.r(g),i.d(g,{CreatePhotoGradePageModule:()=>M});var l=i(6895),h=i(4719),n=i(2478),s=i(1065),u=i(5861),o=i(7631),m=i(3364),P=i(5904),_=i(3710);function f(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"div",2),o._UZ(1,"ion-img",3),o.TgZ(2,"ion-icon",4),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.onRemovePhotoGrade())}),o.qZA()()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("src",t.photoDataUrl)}}function G(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"ion-button",5),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.addPhotoGrade())}),o.TgZ(1,"div"),o._UZ(2,"ion-icon",6)(3,"br"),o.TgZ(4,"ion-text"),o._uU(5,"Add Photo"),o.qZA()()()}}let C=(()=>{class e{constructor(t){this.photo=t,this.photoDataUrl="",this.add=new o.vpe,this.remove=new o.vpe}ngOnInit(){}addPhotoGrade(){var t=this;return(0,u.Z)(function*(){const a=yield t.photo.promptPhoto();t.currentPhoto=a,t.add.emit(t.currentPhoto)})()}onRemovePhotoGrade(){this.remove.emit(this.currentPhoto),this.currentPhoto=null}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(_.T))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-upload-photo-grade"]],inputs:{photoDataUrl:"photoDataUrl"},outputs:{add:"add",remove:"remove"},decls:2,vars:2,consts:[["class","current-photo-container",4,"ngIf"],["expand","block","color","dark","class","add-photo-button ion-margin-end",3,"click",4,"ngIf"],[1,"current-photo-container"],[1,"grade-photo","ion-margin-end",3,"src"],["name","trash","color","danger",1,"trash-icon",3,"click"],["expand","block","color","dark",1,"add-photo-button","ion-margin-end",3,"click"],["src","/assets/icon/add-photo.svg",1,"add-photo-icon"]],template:function(t,a){1&t&&(o.YNc(0,f,3,1,"div",0),o.YNc(1,G,6,0,"ion-button",1)),2&t&&(o.Q6J("ngIf",a.photoDataUrl),o.xp6(1),o.Q6J("ngIf",!a.photoDataUrl))},dependencies:[l.O5,n.YG,n.gu,n.Xz,n.yW],styles:[".add-photo-button[_ngcontent-%COMP%]{--background: #fff;width:104px;height:83px}.grade-photo[_ngcontent-%COMP%]{width:104px;height:83px;background:#000}.add-photo-icon[_ngcontent-%COMP%]{--color: #000;width:26px;height:26px}.current-photo-container[_ngcontent-%COMP%]{position:relative}.trash-icon[_ngcontent-%COMP%]{position:absolute;top:2px;left:5px}"]}),e})();function x(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"app-upload-photo-grade",8),o.NdJ("add",function(r){o.CHM(t);const p=o.oxw();return o.KtG(p.onAddPhoto(r,1))})("remove",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.onRemovePhotoGrade(1))}),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("photoDataUrl",t.photoGradeDataUrl[1])}}function v(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"app-upload-photo-grade",8),o.NdJ("add",function(r){o.CHM(t);const p=o.oxw();return o.KtG(p.onAddPhoto(r,2))})("remove",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.onRemovePhotoGrade(2))}),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("photoDataUrl",t.photoGradeDataUrl[2])}}function U(e,d){1&e&&(o.TgZ(0,"ion-text",19)(1,"small"),o._uU(2," Please add a photo."),o.qZA()())}const b=[{path:"",component:(()=>{class e{constructor(t,a,r,p,c,w){this.photoGradeService=t,this.accountService=a,this.photoService=r,this.loadingCtrl=p,this.toastCtrl=c,this.route=w,this.fullness=100,this.notes="",this.photoGrade=[],this.photoGradeDataUrl=[],this.showError=!1}ngOnInit(){}submitGrading(){var t=this;return(0,u.Z)(function*(){if(t.photoGradeDataUrl.length){const a=yield t.loadingCtrl.create({message:"Submitting photo grade ..."});a.present();const r=new FormData;t.photoGrade.forEach(c=>{r.append("photoGrades",c)}),yield t.photoGradeService.submitPhotoGrade({fullNess:t.fullness,notes:t.notes,formData:r}),yield t.accountService.user(t.accountService.currentUser.id.toString()),a.dismiss(),(yield t.toastCtrl.create({message:"Successfully submited photo grade.",duration:2e3,color:"success"})).present(),t.route.navigate(["/tabs/tabs/photo-grade"])}else t.showError=!0})()}onAddPhoto(t,a){this.photoGradeDataUrl[a]=t.dataUrl,this.photoGrade[a]=this.photoService.dataURItoBlob(t.dataUrl)}onRemovePhotoGrade(t){this.photoGrade.splice(t,1),this.photoGradeDataUrl.splice(t,1)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(m.a),o.Y36(P.B),o.Y36(_.T),o.Y36(n.HT),o.Y36(n.yF),o.Y36(s.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-create-photo-grade"]],decls:38,vars:7,consts:[["mode","ios"],["slot","start"],["mode","md"],[1,"ion-padding"],[1,"ion-text-center","ion-margin-bottom"],[1,"paragraph-text-16-bold"],[1,"ion-margin-bottom"],[1,"box-flex"],[3,"photoDataUrl","add","remove"],[3,"photoDataUrl","add","remove",4,"ngIf"],["color","danger",4,"ngIf"],["position","stacked",1,"white","paragraph-text-14-bold"],[1,"ion-align-items-center","lot-range"],["mode","ios","min","0","max","100","step","10",3,"pin","ngModel","ngModelChange"],["slot","start",1,"white-500"],["slot","end",1,"white-500"],["placeholder","Enter any notes","rows","6",1,"lot-input",3,"ngModel","ngModelChange"],["expand","block",1,"submit-grading-button",3,"click"],[1,"paragraph-text-16-semibold","white"],["color","danger"]],template:function(t,a){1&t&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o._UZ(3,"ion-back-button",2),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5,"New Photo Grade"),o.qZA()()(),o.TgZ(6,"ion-content",3)(7,"div",4)(8,"ion-text",5),o._uU(9,"Add up to Three Photos"),o.qZA()(),o.TgZ(10,"ion-grid")(11,"ion-row",6)(12,"ion-col")(13,"div",7)(14,"app-upload-photo-grade",8),o.NdJ("add",function(p){return a.onAddPhoto(p,0)})("remove",function(){return a.onRemovePhotoGrade(0)}),o.qZA(),o.YNc(15,x,1,1,"app-upload-photo-grade",9),o.YNc(16,v,1,1,"app-upload-photo-grade",9),o.qZA(),o.YNc(17,U,3,0,"ion-text",10),o.qZA()(),o.TgZ(18,"ion-row")(19,"ion-col")(20,"ion-label",11),o._uU(21,"Item Fullness %"),o.qZA(),o.TgZ(22,"div",12)(23,"ion-range",13),o.NdJ("ngModelChange",function(p){return a.fullness=p}),o.TgZ(24,"ion-text",14),o._uU(25,"0"),o.qZA(),o.TgZ(26,"ion-text",15),o._uU(27,"100"),o.qZA()()()()(),o.TgZ(28,"ion-row")(29,"ion-col")(30,"ion-label",11),o._uU(31,"Notes"),o.qZA()()(),o.TgZ(32,"ion-row")(33,"ion-col")(34,"ion-textarea",16),o.NdJ("ngModelChange",function(p){return a.notes=p}),o.qZA()()()(),o.TgZ(35,"ion-button",17),o.NdJ("click",function(){return a.submitGrading()}),o.TgZ(36,"ion-text",18),o._uU(37,"Submit for grading"),o.qZA()()()),2&t&&(o.xp6(14),o.Q6J("photoDataUrl",a.photoGradeDataUrl.length?a.photoGradeDataUrl[0]:""),o.xp6(1),o.Q6J("ngIf",a.photoGradeDataUrl.length>0),o.xp6(1),o.Q6J("ngIf",a.photoGradeDataUrl.length>1),o.xp6(1),o.Q6J("ngIf",a.showError&&!a.photoGradeDataUrl.length),o.xp6(6),o.Q6J("pin",!0)("ngModel",a.fullness),o.xp6(11),o.Q6J("ngModel",a.notes))},dependencies:[l.O5,h.JJ,h.On,n.oU,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.Q$,n.I_,n.Nd,n.yW,n.g2,n.wd,n.sr,n.QI,n.j9,n.cs,C],styles:["ion-textarea[_ngcontent-%COMP%]{--background: #fff;border-radius:12px;--padding-start: 10px;--padding-end: 10px;--color: #000}.lot-input[_ngcontent-%COMP%]{--background: #f3f7f9}ion-item[_ngcontent-%COMP%]::part(native){border:0px}ion-label[_ngcontent-%COMP%]{padding-bottom:16px}.lot-range[_ngcontent-%COMP%]{display:flex;width:100%}.submit-grading-button[_ngcontent-%COMP%]{--background: #000;--border-radius: 12px;height:46px;text-transform:capitalize}.add-photo-button[_ngcontent-%COMP%]{--background: #fff;width:104px;height:83px}.grade-photo[_ngcontent-%COMP%]{width:104px;height:83px;background:#000}.add-photo-icon[_ngcontent-%COMP%]{--color: #000;width:26px;height:26px}ion-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[s.Bz.forChild(b),s.Bz]}),e})();var Z=i(1075);let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[l.ez,h.u5,n.Pc,T,Z.m]}),e})()}}]);