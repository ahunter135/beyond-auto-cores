"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4023],{3866:(v,m,i)=>{i.d(m,{G:()=>f});var a=i(7631),x=i(1065),d=i(6895),g=i(2478);function p(l,_){1&l&&(a.TgZ(0,"ion-buttons",6),a._UZ(1,"ion-img",7),a.qZA())}function h(l,_){if(1&l&&(a.TgZ(0,"ion-title"),a._uU(1),a.qZA()),2&l){const u=a.oxw();a.xp6(1),a.Oqu(u.title)}}function t(l,_){1&l&&a._UZ(0,"ion-img",8)}let f=(()=>{class l{constructor(u){this.route=u,this.isHome=!1}ngOnInit(){}goToSettings(){this.route.navigate(["/settings"])}}return l.\u0275fac=function(u){return new(u||l)(a.Y36(x.F0))},l.\u0275cmp=a.Xpm({type:l,selectors:[["app-header"]],inputs:{title:"title",isHome:"isHome"},decls:7,vars:3,consts:[["mode","ios"],["slot","start",4,"ngIf"],[4,"ngIf"],["class","header-ion-logo","src","/assets/cm-logo-home.svg",4,"ngIf"],["slot","end"],["src","/assets/icon/settings.svg",1,"header-ion-icon-settings",3,"click"],["slot","start"],["src","/assets/cm-logo-header.svg",1,"header-ion-icon-logo"],["src","/assets/cm-logo-home.svg",1,"header-ion-logo"]],template:function(u,G){1&u&&(a.TgZ(0,"ion-header")(1,"ion-toolbar",0),a.YNc(2,p,2,0,"ion-buttons",1),a.YNc(3,h,2,1,"ion-title",2),a.YNc(4,t,1,0,"ion-img",3),a.TgZ(5,"ion-buttons",4)(6,"ion-img",5),a.NdJ("click",function(){return G.goToSettings()}),a.qZA()()()()),2&u&&(a.xp6(2),a.Q6J("ngIf",!G.isHome),a.xp6(1),a.Q6J("ngIf",!G.isHome),a.xp6(1),a.Q6J("ngIf",G.isHome))},dependencies:[d.O5,g.Sm,g.Gu,g.Xz,g.wd,g.sr],styles:[".header-ion-icon-logo[_ngcontent-%COMP%]{padding-left:8px;padding-right:3px;width:43px}.header-ion-icon-settings[_ngcontent-%COMP%]{padding-left:8px;padding-right:5px;width:41px;height:41px}.header-ion-logo[_ngcontent-%COMP%]{width:100%;height:35px;position:absolute;top:4px}ion-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}"]}),l})()},1075:(v,m,i)=>{i.d(m,{m:()=>p});var a=i(6895),x=i(4719),d=i(2478),g=i(7631);let p=(()=>{class h{}return h.\u0275fac=function(f){return new(f||h)},h.\u0275mod=g.oAB({type:h}),h.\u0275inj=g.cJS({imports:[a.ez,x.u5,d.Pc]}),h})()},4023:(v,m,i)=>{i.r(m),i.d(m,{PhotoGradePageModule:()=>F});var a=i(6895),x=i(4719),d=i(2478),g=i(1065),p=i(5861),h=i(3951),t=i(7631),f=i(3364),l=i(5904),_=i(411),u=i(3866),G=i(1687),C=i(9),Z=i(5676);function T(e,c){if(1&e&&(t.TgZ(0,"ion-card",5)(1,"ion-card-content",6)(2,"ion-row",7)(3,"ion-col",8),t._UZ(4,"ion-img",9),t.qZA(),t.TgZ(5,"ion-col",10)(6,"ion-text",11),t._uU(7,"In Review"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"ion-text",12),t._uU(10),t.qZA()()()()()),2&e){const o=t.oxw(2);t.xp6(4),t.Q6J("src",o.photoGrade.fileUrl||o.thumbnail),t.xp6(6),t.hij("",o.photoGrade.fullness,"%")}}function I(e,c){if(1&e&&(t.TgZ(0,"ion-col",17)(1,"ion-text",11),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"ion-text",12),t._uU(5),t.qZA(),t.TgZ(6,"ion-text",12),t._uU(7),t.qZA()()),2&e){const o=t.oxw(3);t.xp6(2),t.Oqu(o.name),t.xp6(3),t.hij("",o.formatPrice(o.photoGrade.price*(o.photoGrade.fullness/100))," "),t.xp6(2),t.hij("| ",o.photoGrade.fullness,"%")}}function M(e,c){1&e&&(t.TgZ(0,"ion-col",17)(1,"ion-text",11),t._uU(2,"Rejected"),t.qZA()())}function S(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"ion-card",13),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.onView())}),t.TgZ(1,"ion-card-content",6)(2,"ion-row",7)(3,"ion-col",14),t._UZ(4,"ion-img",9),t.qZA(),t.YNc(5,I,8,3,"ion-col",15),t.YNc(6,M,3,0,"ion-col",15),t._UZ(7,"ion-col",16),t.qZA()()()}if(2&e){const o=t.oxw(2);t.xp6(4),t.Q6J("src",o.photoGrade.fileUrl||o.thumbnail),t.xp6(1),t.Q6J("ngIf",1===o.photoGrade.photoGradeStatus),t.xp6(1),t.Q6J("ngIf",2===o.photoGrade.photoGradeStatus)}}function b(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.openModal())}),t.TgZ(1,"div"),t._UZ(2,"ion-icon",19)(3,"br"),t.TgZ(4,"ion-text",20),t._uU(5,"Add"),t.qZA()()()}}function O(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.delete())}),t.TgZ(1,"div"),t._UZ(2,"ion-icon",21)(3,"br"),t.TgZ(4,"ion-text",20),t._uU(5,"Delete"),t.qZA()()()}}function U(e,c){if(1&e&&(t.TgZ(0,"div",1),t.YNc(1,T,11,2,"ion-card",2),t.YNc(2,S,8,3,"ion-card",3),t.YNc(3,b,6,0,"ion-button",4),t.YNc(4,O,6,0,"ion-button",4),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.photoGrade.photoGradeStatus),t.xp6(1),t.Q6J("ngIf",o.photoGrade.photoGradeStatus),t.xp6(1),t.Q6J("ngIf",1===o.photoGrade.photoGradeStatus),t.xp6(1),t.Q6J("ngIf",2===o.photoGrade.photoGradeStatus)}}let y=(()=>{class e{constructor(o,n,r,s,P){this.modalCtrl=o,this.photoGradeService=n,this.actionSheetCtrl=r,this.loadingCtrl=s,this.router=P,this.thumbnail="../../../assets/cm-logo-home.svg"}ngOnInit(){var o=this;return(0,p.Z)(function*(){console.log(""===o.photoGrade.converterName),o.name=""===o.photoGrade.converterName?"No Code":o.photoGrade.converterName})()}openModal(){var o=this;return(0,p.Z)(function*(){o.photoGradeService.setSelectedPhotoGrade=o.photoGrade,console.log(o.photoGrade),yield(yield o.modalCtrl.create({component:Z.E,cssClass:"add-lot-modal",componentProps:{isPhotoGrade:!0},animated:!1})).present()})()}onView(){this.photoGradeService.setSelectedPhotoGrade=this.photoGrade,this.router.navigate(["/photo-grade-view"])}delete(){var o=this;return(0,p.Z)(function*(){var r;yield(yield o.actionSheetCtrl.create({header:"Delete this photo grade?",cssClass:"photo-grade-action-sheet",buttons:[{text:"Delete",role:"destructive",icon:"trash",id:"delete-button",data:{type:"delete"},handler:(r=(0,p.Z)(function*(){const s=yield o.loadingCtrl.create({message:"Deleting ..."});s.present(),yield o.photoGradeService.deletePhotoGrade(o.photoGrade.photoGradeId.toString()),s.dismiss()}),function(){return r.apply(this,arguments)})},{text:"Cancel",icon:"close",role:"cancel"}]})).present()})()}formatPrice(o){return(0,C.O)(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.IN),t.Y36(f.a),t.Y36(d.BX),t.Y36(d.HT),t.Y36(g.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-photo-grade-card"]],inputs:{photoGrade:"photoGrade"},decls:1,vars:1,consts:[["class","generics-card-container",4,"ngIf"],[1,"generics-card-container"],["class","generics-card-item",4,"ngIf"],["class","generics-card-item",3,"click",4,"ngIf"],["class","generic-add-button",3,"click",4,"ngIf"],[1,"generics-card-item"],[1,"generics-card-item-content"],[1,"ion-align-items-center"],["size","4",1,"ion-text-start","ion-no-padding"],[1,"generic-img",3,"src"],["size","8",1,"ion-text-center"],[1,"paragraph-text-16","white"],[1,"paragraph-text-16-bold","white"],[1,"generics-card-item",3,"click"],[1,"ion-text-start","ion-no-padding"],["class","ion-text-center","size","6",4,"ngIf"],[1,"ion-text-end"],["size","6",1,"ion-text-center"],[1,"generic-add-button",3,"click"],["src","/assets/icon/add-lot-icon.svg",1,"generic-add-icon"],[1,"paragraph-text-12-light","ion-text-capitalize"],["src","/assets/icon/trash-lot-icon.svg",1,"generic-add-icon"]],template:function(o,n){1&o&&t.YNc(0,U,5,4,"div",0),2&o&&t.Q6J("ngIf",n.photoGrade)},dependencies:[a.O5,d.YG,d.PM,d.FN,d.wI,d.gu,d.Xz,d.Nd,d.yW],styles:["ion-item[_ngcontent-%COMP%]{--background: transparent !important;--inner-border-width: 0px !important}.generics-card-container[_ngcontent-%COMP%]{position:relative;width:100%}.generic-add-button[_ngcontent-%COMP%]{position:absolute;right:14px;top:-4px;--background: #fff;--color: #000;width:69px;height:100%;--border-radius: 0px 10px 10px 0px}.generic-add-icon[_ngcontent-%COMP%]{--color: #000;width:26px;height:26px}.generics-card-item[_ngcontent-%COMP%]{padding:0!important;margin:0 15px 9px!important}.generics-card-item-content[_ngcontent-%COMP%]{padding:0!important}.generic-img[_ngcontent-%COMP%]{width:100px;height:65px;object-fit:cover}"]}),e})();const L=["content"];function A(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div",11)(1,"p")(2,"ion-text",12),t._uU(3,"No Parts Currently Submitted."),t.qZA()(),t.TgZ(4,"p")(5,"ion-text",13),t._uU(6),t.qZA()(),t.TgZ(7,"p")(8,"ion-text",14),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.purchaseMore())}),t._uU(9,"Purchase more credits."),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(6),t.hij("You have ",o.gradeCredits||0," photo grade credits")}}function N(e,c){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-skeleton-list-loader"),t.qZA())}function J(e,c){1&e&&t._UZ(0,"app-photo-grade-card",16),2&e&&t.Q6J("photoGrade",c.$implicit)}function E(e,c){if(1&e&&t.YNc(0,J,1,1,"ng-template",15),2&e){const o=t.oxw();t.Q6J("ngForOf",o.photoGradeList.data)}}function Y(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"ion-infinite-scroll",17),t.NdJ("ionInfinite",function(r){t.CHM(o);const s=t.oxw();return t.KtG(s.onIonInfinite(r))}),t._UZ(1,"ion-infinite-scroll-content"),t.qZA()}}function Q(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"ion-infinite-scroll",17),t.NdJ("ionInfinite",function(r){t.CHM(o);const s=t.oxw();return t.KtG(s.onIonInfinite(r))}),t._UZ(1,"ion-infinite-scroll-content"),t.qZA()}}const w=[{path:"",component:(()=>{class e{constructor(o,n,r,s,P){this.route=o,this.photoGradeService=n,this.accountService=r,this.environmentService=s,this.navCtrl=P,this.photoGradeList={pagination:null,data:[]},this.defaultSegment="submitted",this.isLoading=!1,this.gradeCredits=0}ngOnInit(){}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}ionViewWillEnter(){this.onLoad()}onLoad(){var o=this;return(0,p.Z)(function*(){o.defaultSegment="submitted",o.isLoading=!0,o.photoGradeList=yield o.photoGradeService.photoGradeList({pageNumber:1,pageSize:10,searchCategory:"photoGradeStatus",searchQuery:"0"}),o.accountService.currentUserState$.subscribe(()=>{o.gradeCredits=o.accountService.currentUser?.gradeCredits}),o.isLoading=!1})()}segmentChanged(o){var n=this;return(0,p.Z)(function*(){n.content.scrollToTop(0);const r=o;r.detail.value!==n.defaultSegment&&(n.isLoading=!0,n.photoGradeList={data:[],pagination:null},n.defaultSegment=r.detail.value,"submitted"===n.defaultSegment?(n.photoGradeList=yield n.photoGradeService.photoGradeList({pageNumber:1,pageSize:10,searchCategory:"photoGradeStatus",searchQuery:"0"}),n.isLoading=!1):(n.photoGradeList=yield n.photoGradeService.photoGradeCompletedList({pageNumber:1,pageSize:10}),n.isLoading=!1))})()}onIonInfinite(o){var n=this;return(0,p.Z)(function*(){const r=n.photoGradeList?.pagination?.nextPageLink;if(n.isLoading=!0,r&&!n.photoGradeService.isLoadingMore){const{data:s,pagination:P}=yield n.photoGradeService.nextPhotoGrade(r);n.photoGradeList={data:[...n.photoGradeList.data,...s],pagination:P}}n.isLoading=!1,setTimeout(()=>{o.target.complete()},500)})()}newPhotoGrade(){this.navCtrl.navigateForward("tabs/tabs/photo-grade/create-photo-grade")}purchaseMore(){var o=this;return(0,p.Z)(function*(){yield h.A.open({url:o.environmentService.signInUrl})})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.F0),t.Y36(f.a),t.Y36(l.B),t.Y36(_.L),t.Y36(d.SH))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-photo-grade"]],viewQuery:function(o,n){if(1&o&&t.Gf(L,5),2&o){let r;t.iGM(r=t.CRH())&&(n.content=r.first)}},decls:20,vars:9,consts:[["title","Photo Grade"],["content",""],[1,"ion-padding"],["mode","ios",3,"value","ionChange"],["value","submitted"],["value","completed"],["class","photo-grade-container ion-text-center ion-margin-top",4,"ngIf"],[4,"ngIf"],["threshold","200px",3,"ionInfinite",4,"ngIf"],["expand","block",1,"new-photo-grade-button",3,"click"],[1,"paragraph-text-16-semibold","ion-text-wrap"],[1,"photo-grade-container","ion-text-center","ion-margin-top"],[1,"paragraph-text-16","ion-margin-bottom"],[1,"paragraph-text-16","ion-padding-top","ion-margin-bottom"],[1,"paragraph-text-20-bold","ion-padding-top","ion-margin-bottom",3,"click"],["ngFor","",3,"ngForOf"],[3,"photoGrade"],["threshold","200px",3,"ionInfinite"]],template:function(o,n){1&o&&(t._UZ(0,"app-header",0),t.TgZ(1,"ion-content",null,1)(3,"div",2)(4,"ion-segment",3),t.NdJ("ionChange",function(s){return n.segmentChanged(s)}),t.TgZ(5,"ion-segment-button",4)(6,"ion-label"),t._uU(7,"Submitted"),t.qZA()(),t.TgZ(8,"ion-segment-button",5)(9,"ion-label"),t._uU(10,"Completed"),t.qZA()()()(),t.YNc(11,A,10,1,"div",6),t.YNc(12,N,2,0,"div",7),t.YNc(13,E,1,1,null,7),t.YNc(14,Y,2,0,"ion-infinite-scroll",8),t.YNc(15,Q,2,0,"ion-infinite-scroll",8),t.qZA(),t.TgZ(16,"ion-footer",2)(17,"ion-button",9),t.NdJ("click",function(){return n.newPhotoGrade()}),t.TgZ(18,"ion-text",10),t._uU(19),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("value",n.defaultSegment),t.uIk("disabled",n.isLoading),t.xp6(7),t.Q6J("ngIf",!n.photoGradeList.data.length&&!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading&&!n.photoGradeList.data),t.xp6(1),t.Q6J("ngIf",n.photoGradeList.data),t.xp6(1),t.Q6J("ngIf","submitted"===n.defaultSegment),t.xp6(1),t.Q6J("ngIf","completed"===n.defaultSegment),t.xp6(2),t.uIk("disabled",!n.gradeCredits),t.xp6(2),t.hij("New Photo Grade (",n.gradeCredits||0," Remaining)"))},dependencies:[a.sg,a.O5,d.YG,d.W2,d.fr,d.ju,d.MB,d.Q$,d.cJ,d.GO,d.yW,d.QI,u.G,G.f,y],styles:[".new-photo-grade-button[_ngcontent-%COMP%]{--background: #000;--border-radius: 12px;height:46px;text-transform:capitalize}ion-footer[_ngcontent-%COMP%]{border:0px}.photo-grade-container[_ngcontent-%COMP%]{width:100%;margin:50% auto auto;display:block}ion-segment-button[_ngcontent-%COMP%]{--color: #ffffff80;--background-checked: #000;--color-checked: #000000;--indicator-color: #ffffff}ion-segment[_ngcontent-%COMP%]{--background: #000000;--color: #ffffff80;width:250px;margin:auto}"]}),e})()},{path:"create-photo-grade",loadChildren:()=>i.e(3122).then(i.bind(i,3122)).then(e=>e.CreatePhotoGradePageModule)}];let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(w),g.Bz]}),e})();var D=i(1075);let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,x.u5,d.Pc,H,D.m]}),e})()}}]);