(function(){"use strict";function configPushController($scope,uSyncPublishService){function toggleItems(value,content){Object.keys(pvm.items).forEach(key=>{(content||key!=="media"&&key!=="content")&&(pvm.items[key].value=value)})}function InitOptions(){pvm.process.options={removeOrphans:pvm.flags.deleteMissing.value,includeFileHash:pvm.flags.includeFiles.value};pvm.process.items=[{id:item.id,name:contentName,udi:item.udi,flags:uSyncPublishService.getFlags(pvm.flags)}];unsubscribe.push($scope.$watch("pvm.items",function(newVal){newVal!==undefined&&(pvm.process.items=[],angular.forEach(newVal,function(value,key){key==="files"?pvm.process.options.includeFileHash=value.value:key=="systemFiles"?pvm.process.options.includeSystemFileHash=value.value:value.value===!0&&value.typeName!==null&&pvm.process.items.push({udi:"umb://"+value.typeName+"/"+value.root,name:value.typeName,flags:pvm.flagsValue})}),newVal.template.value===!0&&newVal.files.value!==!0&&(newVal.files.value=!0))},!0))}var unsubscribe=[],pvm=this,emptyGuid,emptyString,item,contentName;pvm.mode=$scope.vm.mode;pvm.contentType=$scope.vm.contentType;pvm.process=$scope.vm.process;pvm.flags={includeChildren:{toggle:!0,value:!0},includeDecendants:{toggle:!0,value:!0},includeMedia:{toggle:!1,value:!1},includeLinked:{toggle:!1,value:!1},includeAncestors:{toggle:!1,value:!1},includeDependencies:{toggle:!1,value:!1},includeFiles:{toggle:!1,value:!0},includeMediaFiles:{toggle:!1,value:!1},deleteMissing:{toggle:!1,value:!1},includeSystemFiles:{toggle:!1,value:!1}};pvm.flagsValue=uSyncPublishService.getFlags(pvm.flags);emptyGuid="00000000-0000-0000-0000-000000000000";emptyString="";pvm.items={docTypes:{toggle:!0,value:!0,typeName:"document-type",root:emptyGuid},dataTypes:{toggle:!0,value:!0,typeName:"data-type",root:emptyGuid},mediaTypes:{toggle:!0,value:!0,typeName:"media-type",root:emptyGuid},domains:{toggle:!0,value:!0,typeName:"domain",root:emptyGuid},memberTypes:{toggle:!0,value:!0,typeName:"member-type",root:emptyGuid},dictionary:{toggle:!0,value:!0,typeName:"dictionary-item",root:emptyGuid},macro:{toggle:!0,value:!0,typeName:"macro",root:emptyGuid},template:{toggle:!0,value:!0,typeName:"template",root:emptyGuid},files:{toggle:!0,value:!0,typeName:null,root:emptyString},systemFiles:{toggle:!0,value:!1,typeName:null,root:emptyString},languages:{toggle:!0,value:!0,typeName:"language",root:emptyString},protect:{toggle:!0,value:!0,typeName:"protect",root:emptyGuid},content:{toggle:!0,value:!1,typeName:"document",root:emptyGuid},media:{toggle:!0,value:!1,typeName:"media",root:emptyGuid},relationTypes:{toggle:!0,value:!0,typeName:"relation-type",root:emptyGuid}};pvm.server=$scope.vm.selectedServer;item=$scope.vm.items[0];contentName=item.name;$scope.vm.headings!==undefined&&($scope.vm.headings.title="PUSH Settings",$scope.vm.headings.description="PUSH settings to "+pvm.server.name);InitOptions();$scope.$on("$destroy",function(){for(var u in unsubscribe)unsubscribe[u]()});pvm.clearAll=function(){toggleItems(!1,!0)};pvm.selectAll=function(){toggleItems(!0,!1)}}angular.module("umbraco").controller("uSyncPublisherConfigPushController",configPushController)})()