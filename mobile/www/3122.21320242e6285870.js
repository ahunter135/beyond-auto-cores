"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3122],{76:(U,g,r)=>{r.d(g,{GW:()=>c,dk:()=>e,oK:()=>l});var l=(()=>{return(i=l||(l={})).Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS",l;var i})(),c=(()=>{return(i=c||(c={})).Rear="REAR",i.Front="FRONT",c;var i})(),e=(()=>{return(i=e||(e={})).Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",e;var i})()},3710:(U,g,r)=>{r.d(g,{T:()=>o});var l=r(5861),c=r(7423),e=r(76);const i=(0,c.fo)("Camera",{web:()=>r.e(3954).then(r.bind(r,3954)).then(u=>new u.CameraWeb)});var _=r(7631);let o=(()=>{class u{constructor(){}fromPhotos(){return(0,l.Z)(function*(){return yield i.getPhoto({resultType:e.dk.DataUrl,source:e.oK.Photos,quality:90,allowEditing:!0})})()}capturePhoto(){return(0,l.Z)(function*(){return yield i.getPhoto({resultType:e.dk.DataUrl,source:e.oK.Camera,quality:100,allowEditing:!0})})()}promptPhoto(){return(0,l.Z)(function*(){return yield i.getPhoto({resultType:e.dk.DataUrl,source:e.oK.Prompt,quality:100,allowEditing:!0})})()}promptPhotoBase64(){return(0,l.Z)(function*(){return yield i.getPhoto({resultType:e.dk.Base64,source:e.oK.Prompt,quality:100,allowEditing:!0})})()}dataURItoBlob(h){const m=atob(h.split(",")[1]),C=h.split(",")[0].split(":")[1].split(";")[0],f=new ArrayBuffer(m.length),v=new Uint8Array(f);for(let P=0;P<m.length;P++)v[P]=m.charCodeAt(P);return new Blob([f],{type:C})}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3122:(U,g,r)=>{r.r(g),r.d(g,{CreatePhotoGradePageModule:()=>M});var l=r(6895),c=r(4719),e=r(2478),i=r(1065),_=r(5861),o=r(7631),u=r(3364),G=r(5904),h=r(3710);function m(n,p){if(1&n){const t=o.EpF();o.TgZ(0,"div",2),o._UZ(1,"ion-img",3),o.TgZ(2,"ion-icon",4),o.NdJ("click",function(){o.CHM(t);const d=o.oxw();return o.KtG(d.onRemovePhotoGrade())}),o.qZA()()}if(2&n){const t=o.oxw();o.xp6(1),o.Q6J("src",t.photoDataUrl)}}function C(n,p){if(1&n){const t=o.EpF();o.TgZ(0,"ion-button",5),o.NdJ("click",function(){o.CHM(t);const d=o.oxw();return o.KtG(d.addPhotoGrade())}),o.TgZ(1,"div"),o._UZ(2,"ion-icon",6)(3,"br"),o.TgZ(4,"ion-text"),o._uU(5,"Add Photo"),o.qZA()()()}}let f=(()=>{class n{constructor(t){this.photo=t,this.photoDataUrl="",this.add=new o.vpe,this.remove=new o.vpe}ngOnInit(){}addPhotoGrade(){var t=this;return(0,_.Z)(function*(){const a=yield t.photo.promptPhoto();t.currentPhoto=a,t.add.emit(t.currentPhoto)})()}onRemovePhotoGrade(){this.remove.emit(this.currentPhoto),this.currentPhoto=null}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(h.T))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-upload-photo-grade"]],inputs:{photoDataUrl:"photoDataUrl"},outputs:{add:"add",remove:"remove"},decls:2,vars:2,consts:[["class","current-photo-container",4,"ngIf"],["expand","block","color","dark","class","add-photo-button ion-margin-end",3,"click",4,"ngIf"],[1,"current-photo-container"],[1,"grade-photo","ion-margin-end",3,"src"],["name","trash","color","danger",1,"trash-icon",3,"click"],["expand","block","color","dark",1,"add-photo-button","ion-margin-end",3,"click"],["src","/assets/icon/add-photo.svg",1,"add-photo-icon"]],template:function(t,a){1&t&&(o.YNc(0,m,3,1,"div",0),o.YNc(1,C,6,0,"ion-button",1)),2&t&&(o.Q6J("ngIf",a.photoDataUrl),o.xp6(1),o.Q6J("ngIf",!a.photoDataUrl))},dependencies:[l.O5,e.YG,e.gu,e.Xz,e.yW],styles:[".add-photo-button[_ngcontent-%COMP%]{--background: #fff;width:104px;height:83px}.grade-photo[_ngcontent-%COMP%]{width:104px;height:83px;background:#000}.add-photo-icon[_ngcontent-%COMP%]{--color: #000;width:26px;height:26px}.current-photo-container[_ngcontent-%COMP%]{position:relative}.trash-icon[_ngcontent-%COMP%]{position:absolute;top:2px;left:5px}"]}),n})();function v(n,p){if(1&n){const t=o.EpF();o.TgZ(0,"app-upload-photo-grade",8),o.NdJ("add",function(d){o.CHM(t);const s=o.oxw();return o.KtG(s.onAddPhoto(d,1))})("remove",function(){o.CHM(t);const d=o.oxw();return o.KtG(d.onRemovePhotoGrade(1))}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("photoDataUrl",t.photoGradeDataUrl[1])}}function P(n,p){if(1&n){const t=o.EpF();o.TgZ(0,"app-upload-photo-grade",8),o.NdJ("add",function(d){o.CHM(t);const s=o.oxw();return o.KtG(s.onAddPhoto(d,2))})("remove",function(){o.CHM(t);const d=o.oxw();return o.KtG(d.onRemovePhotoGrade(2))}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("photoDataUrl",t.photoGradeDataUrl[2])}}function T(n,p){1&n&&(o.TgZ(0,"ion-text",19)(1,"small"),o._uU(2," Please add a photo."),o.qZA()())}const b=[{path:"",component:(()=>{class n{constructor(t,a,d,s,x,w){this.photoGradeService=t,this.accountService=a,this.photoService=d,this.loadingCtrl=s,this.toastCtrl=x,this.route=w,this.fullness=100,this.notes="",this.photoGrade=[],this.photoGradeDataUrl=[],this.showError=!1}ngOnInit(){}submitGrading(){var t=this;return(0,_.Z)(function*(){if(t.photoGradeDataUrl.length){const a=yield t.loadingCtrl.create({message:"Submitting photo grade ..."});a.present();const d=new FormData;t.photoGrade.forEach(x=>{d.append("photoGrades",x)}),yield t.photoGradeService.submitPhotoGrade({fullNess:t.fullness,notes:t.notes,formData:d}),yield t.accountService.user(t.accountService.currentUser.id.toString()),a.dismiss(),(yield t.toastCtrl.create({message:"Successfully submited photo grade.",duration:2e3,color:"success"})).present(),t.route.navigate(["/tabs/tabs/photo-grade"])}else t.showError=!0})()}onAddPhoto(t,a){this.photoGradeDataUrl[a]=t.dataUrl,this.photoGrade[a]=this.photoService.dataURItoBlob(t.dataUrl)}onRemovePhotoGrade(t){this.photoGrade.splice(t,1),this.photoGradeDataUrl.splice(t,1)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(u.a),o.Y36(G.B),o.Y36(h.T),o.Y36(e.HT),o.Y36(e.yF),o.Y36(i.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-create-photo-grade"]],decls:38,vars:7,consts:[["mode","ios"],["slot","start"],["mode","md"],[1,"ion-padding"],[1,"ion-text-center","ion-margin-bottom"],[1,"paragraph-text-16-bold"],[1,"ion-margin-bottom"],[1,"box-flex"],[3,"photoDataUrl","add","remove"],[3,"photoDataUrl","add","remove",4,"ngIf"],["color","danger",4,"ngIf"],["position","stacked",1,"white","paragraph-text-14-bold"],[1,"ion-align-items-center","lot-range"],["mode","ios","min","0","max","100","step","10",3,"pin","ngModel","ngModelChange"],["slot","start",1,"white-500"],["slot","end",1,"white-500"],["placeholder","Enter any notes","rows","6",1,"lot-input",3,"ngModel","ngModelChange"],["expand","block",1,"submit-grading-button",3,"click"],[1,"paragraph-text-16-semibold","white"],["color","danger"]],template:function(t,a){1&t&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o._UZ(3,"ion-back-button",2),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5,"New Photo Grade"),o.qZA()()(),o.TgZ(6,"ion-content",3)(7,"div",4)(8,"ion-text",5),o._uU(9,"Add up to Three Photos"),o.qZA()(),o.TgZ(10,"ion-grid")(11,"ion-row",6)(12,"ion-col")(13,"div",7)(14,"app-upload-photo-grade",8),o.NdJ("add",function(s){return a.onAddPhoto(s,0)})("remove",function(){return a.onRemovePhotoGrade(0)}),o.qZA(),o.YNc(15,v,1,1,"app-upload-photo-grade",9),o.YNc(16,P,1,1,"app-upload-photo-grade",9),o.qZA(),o.YNc(17,T,3,0,"ion-text",10),o.qZA()(),o.TgZ(18,"ion-row")(19,"ion-col")(20,"ion-label",11),o._uU(21,"Item Fullness %"),o.qZA(),o.TgZ(22,"div",12)(23,"ion-range",13),o.NdJ("ngModelChange",function(s){return a.fullness=s}),o.TgZ(24,"ion-text",14),o._uU(25,"0"),o.qZA(),o.TgZ(26,"ion-text",15),o._uU(27,"100"),o.qZA()()()()(),o.TgZ(28,"ion-row")(29,"ion-col")(30,"ion-label",11),o._uU(31,"Notes"),o.qZA()()(),o.TgZ(32,"ion-row")(33,"ion-col")(34,"ion-textarea",16),o.NdJ("ngModelChange",function(s){return a.notes=s}),o.qZA()()()(),o.TgZ(35,"ion-button",17),o.NdJ("click",function(){return a.submitGrading()}),o.TgZ(36,"ion-text",18),o._uU(37,"Submit for grading"),o.qZA()()()),2&t&&(o.xp6(14),o.Q6J("photoDataUrl",a.photoGradeDataUrl.length?a.photoGradeDataUrl[0]:""),o.xp6(1),o.Q6J("ngIf",a.photoGradeDataUrl.length>0),o.xp6(1),o.Q6J("ngIf",a.photoGradeDataUrl.length>1),o.xp6(1),o.Q6J("ngIf",a.showError&&!a.photoGradeDataUrl.length),o.xp6(6),o.Q6J("pin",!0)("ngModel",a.fullness),o.xp6(11),o.Q6J("ngModel",a.notes))},dependencies:[l.O5,c.JJ,c.On,e.oU,e.YG,e.Sm,e.wI,e.W2,e.jY,e.Gu,e.Q$,e.I_,e.Nd,e.yW,e.g2,e.wd,e.sr,e.QI,e.j9,e.cs,f],styles:["ion-textarea[_ngcontent-%COMP%]{--background: #fff;border-radius:12px;--padding-start: 10px;--padding-end: 10px;--color: #000}.lot-input[_ngcontent-%COMP%]{--background: #f3f7f9}ion-item[_ngcontent-%COMP%]::part(native){border:0px}ion-label[_ngcontent-%COMP%]{padding-bottom:16px}.lot-range[_ngcontent-%COMP%]{display:flex;width:100%}.submit-grading-button[_ngcontent-%COMP%]{--background: #000;--border-radius: 12px;height:46px;text-transform:capitalize}.add-photo-button[_ngcontent-%COMP%]{--background: #fff;width:104px;height:83px}.grade-photo[_ngcontent-%COMP%]{width:104px;height:83px;background:#000}.add-photo-icon[_ngcontent-%COMP%]{--color: #000;width:26px;height:26px}ion-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[i.Bz.forChild(b),i.Bz]}),n})();var y=r(1075);let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[l.ez,c.u5,e.Pc,Z,y.m]}),n})()}}]);