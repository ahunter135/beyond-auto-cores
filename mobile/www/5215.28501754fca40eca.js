"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5215],{3866:(v,f,r)=>{r.d(f,{G:()=>x});var l=r(7631),h=r(1065),a=r(6895),g=r(2478);function u(d,m){1&d&&(l.TgZ(0,"ion-buttons",6),l._UZ(1,"ion-img",7),l.qZA())}function p(d,m){if(1&d&&(l.TgZ(0,"ion-title"),l._uU(1),l.qZA()),2&d){const e=l.oxw();l.xp6(1),l.Oqu(e.title)}}function _(d,m){1&d&&l._UZ(0,"ion-img",8)}let x=(()=>{class d{constructor(e){this.route=e,this.isHome=!1}ngOnInit(){}goToSettings(){this.route.navigate(["/settings"])}}return d.\u0275fac=function(e){return new(e||d)(l.Y36(h.F0))},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-header"]],inputs:{title:"title",isHome:"isHome"},decls:7,vars:3,consts:[["mode","ios"],["slot","start",4,"ngIf"],[4,"ngIf"],["class","header-ion-logo","src","/assets/cm-logo-home.svg",4,"ngIf"],["slot","end"],["src","/assets/icon/settings.svg",1,"header-ion-icon-settings",3,"click"],["slot","start"],["src","/assets/cm-logo-header.svg",1,"header-ion-icon-logo"],["src","/assets/cm-logo-home.svg",1,"header-ion-logo"]],template:function(e,C){1&e&&(l.TgZ(0,"ion-header")(1,"ion-toolbar",0),l.YNc(2,u,2,0,"ion-buttons",1),l.YNc(3,p,2,1,"ion-title",2),l.YNc(4,_,1,0,"ion-img",3),l.TgZ(5,"ion-buttons",4)(6,"ion-img",5),l.NdJ("click",function(){return C.goToSettings()}),l.qZA()()()()),2&e&&(l.xp6(2),l.Q6J("ngIf",!C.isHome),l.xp6(1),l.Q6J("ngIf",!C.isHome),l.xp6(1),l.Q6J("ngIf",C.isHome))},dependencies:[a.O5,g.Sm,g.Gu,g.Xz,g.wd,g.sr],styles:[".header-ion-icon-logo[_ngcontent-%COMP%]{padding-left:8px;padding-right:3px;width:43px}.header-ion-icon-settings[_ngcontent-%COMP%]{padding-left:8px;padding-right:5px;width:41px;height:41px}.header-ion-logo[_ngcontent-%COMP%]{width:100%;height:35px;position:absolute;top:4px}ion-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}"]}),d})()},1075:(v,f,r)=>{r.d(f,{m:()=>u});var l=r(6895),h=r(4719),a=r(2478),g=r(7631);let u=(()=>{class p{}return p.\u0275fac=function(x){return new(x||p)},p.\u0275mod=g.oAB({type:p}),p.\u0275inj=g.cJS({imports:[l.ez,h.u5,a.Pc]}),p})()},5215:(v,f,r)=>{r.r(f),r.d(f,{SearchPageModule:()=>U});var l=r(6895),h=r(4719),a=r(2478),g=r(1065),u=r(5861),p=r(7423),_=r(5196),x=r(2198),d=r(8532),m=r(9),e=r(7631),C=r(3493),P=r(4190),M=r(1253),b=r(3866),T=r(9e3),Z=r(1687);const S=["search"];function y(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-skeleton-list-loader"),e.qZA())}function O(i,s){1&i&&e._UZ(0,"app-generic-code-card",21),2&i&&e.Q6J("code",s.$implicit)}function A(i,s){if(1&i&&e.YNc(0,O,1,1,"ng-template",20),2&i){const t=e.oxw();e.Q6J("ngForOf",t.dataCodes.data)}}function I(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-skeleton-list-loader"),e.qZA())}function N(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",44),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.lotName)}}function k(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-content",22)(1,"ion-toolbar",23)(2,"ion-buttons",24)(3,"ion-text",25),e._uU(4,"Add a New Code and Add to Lot"),e.qZA()(),e.TgZ(5,"ion-buttons",26)(6,"ion-button",27),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(27);return e.KtG(o.dismiss())}),e._UZ(7,"ion-icon",28),e.qZA()()(),e.TgZ(8,"ion-grid")(9,"ion-row")(10,"ion-col")(11,"ion-label",29),e._uU(12,"Lot Name"),e.qZA()()(),e.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-select",30),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.lotId=o)}),e.YNc(16,N,2,2,"ion-select-option",31),e.qZA()()(),e.TgZ(17,"ion-row")(18,"ion-col")(19,"ion-label",32),e._uU(20,"Code"),e.qZA()()(),e.TgZ(21,"ion-row")(22,"ion-col")(23,"ion-input",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.codeName=o)}),e.qZA()()(),e.TgZ(24,"ion-row")(25,"ion-col")(26,"ion-label",32),e._uU(27,"Item Price"),e.qZA()()(),e.TgZ(28,"ion-row")(29,"ion-col")(30,"ion-input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.price=o)})("keydown",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onPriceKeyDown(o))})("ionBlur",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onBlurPrice(o))})("ionInput",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onInputPrice(o))}),e.qZA()()(),e.TgZ(31,"ion-row")(32,"ion-col")(33,"ion-label",32),e._uU(34,"Item Fullness %"),e.qZA()()(),e.TgZ(35,"ion-row")(36,"ion-col")(37,"ion-range",35),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.fullness=o)})("ionChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onChangeFullness())}),e.TgZ(38,"ion-text",36),e._uU(39,"0"),e.qZA(),e.TgZ(40,"ion-text",37),e._uU(41,"100"),e.qZA()()()()(),e.TgZ(42,"ion-footer",38)(43,"div",39)(44,"ion-button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCancelAddCode())}),e.TgZ(45,"ion-text",41),e._uU(46,"Cancel"),e.qZA()(),e.TgZ(47,"ion-button",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addCode())}),e.TgZ(48,"ion-text",43),e._uU(49,"Add to Lot"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(15),e.Q6J("ngModel",t.lotId),e.xp6(1),e.Q6J("ngForOf",t.lots),e.xp6(7),e.Q6J("ngModel",t.codeName),e.xp6(7),e.Q6J("ngModel",t.price),e.xp6(7),e.Q6J("ngModel",t.fullness),e.xp6(10),e.uIk("disabled",!t.lotId||!t.codeName||t.price<0||null==t.price)}}const w=[{path:"",component:(()=>{class i{constructor(t,n,o,c,D,H,K){this.route=t,this.codesService=n,this.lotsService=o,this.lotItemsService=c,this.loadingCtrl=D,this.modalCtrl=H,this.animationCtrl=K,this.dataCodes={data:[],pagination:null},this.searchCode="",this.isLoading=!1,this.fullness=100,this.codeName="",this.lotId="",this.isActivePage=!0,this.navigationSubscription=t.events.pipe((0,x.h)(L=>L instanceof g.OD)).subscribe(()=>{this.search()})}ngOnInit(){p.dV.isPluginAvailable("PushNotifications")&&this.initializeFCM()}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}ngAfterViewInit(){var t=this;p.dV.isPluginAvailable("Keyboard")&&(_.N1.addListener("keyboardWillShow",function(){var n=(0,u.Z)(function*(o){t.isActivePage&&(yield _.N1.setResizeMode({mode:_.sy.None}),yield t.animationCtrl.create().addElement(document.querySelector(".fab")).duration(300).iterations(1).easing("cubic-bezier(.17, .59, .4, .77)").to("transform",`translateY(-${o.keyboardHeight}px)`).play())});return function(o){return n.apply(this,arguments)}}()),_.N1.addListener("keyboardWillHide",(0,u.Z)(function*(){yield t.animateKeyboardDown()})))}ionViewDidEnter(){this.isActivePage=!0}ionViewWillLeave(){this.isActivePage=!1}initializeFCM(){var t=this;return(0,u.Z)(function*(){yield d.V.addListener("pushNotificationReceived",()=>{t.search()})})()}fetchLots(){var t=this;return(0,u.Z)(function*(){t.lots=yield t.lotsService.lots({pageNumber:1,pageSize:66955359,searchCategory:"isSubmitted",searchQuery:"false"})})()}keyEnter(t){var n=this;return(0,u.Z)(function*(){_.N1.hide(),yield n.animateKeyboardDown(),(yield n.searchInput.getInputElement()).blur()})()}goToGenerics(){this.route.navigate(["/generics"])}onSearch(t){this.searchCode=t.target?.value,this.search()}search(){var t=this;return(0,u.Z)(function*(){t.isLoading=!0,t.searchCode?t.dataCodes=yield t.codesService.codes({searchCategory:"converterName",searchQuery:t.searchCode,pageSize:24,pageNumber:1,isCustom:!0,isAdmin:!0}):t.dataCodes.data=[],t.isLoading=!1})()}onClearEmpty(t){t.target?.value||(this.dataCodes.data=[])}addCode(){var t=this;return(0,u.Z)(function*(){const n=yield t.loadingCtrl.create({message:"Adding to lot ...."});n.present(),t.lotsService.setSelectedLot=t.lots.find(c=>c.id===t.lotId),(yield t.lotItemsService.addCodeToLot({lotId:t.lotId,converterName:t.codeName,originalPrice:t.price,fullnessPercentage:t.fullness}))&&t.reset(),t.modalCtrl.dismiss(),n.dismiss(),t.route.navigate(["/lot-list"])})()}onPriceKeyDown(t){("e"===t.key||"."===t.key)&&t.preventDefault()}onInputPrice(t){this.fullness=100,this.fullPrice=0}onBlurPrice(t){this.fullPrice=t.target.value}onChangeFullness(){this.price=(0,m.q)(this.fullness,this.fullPrice)}reset(){this.fullness=100,this.codeName="",this.price=null,this.fullPrice=null}onCancelAddCode(){this.modalCtrl.dismiss(),this.reset()}animateKeyboardDown(){var t=this;return(0,u.Z)(function*(){yield t.animationCtrl.create().addElement(document.querySelector(".fab")).duration(300).iterations(1).easing("cubic-bezier(.17, .59, .4, .77)").to("transform","translateY(0)").play(),yield _.N1.setResizeMode({mode:_.sy.Native})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(C.a),e.Y36(P.s),e.Y36(M.e),e.Y36(a.HT),e.Y36(a.IN),e.Y36(a.vB))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search"]],viewQuery:function(t,n){if(1&t&&e.Gf(S,5),2&t){let o;e.iGM(o=e.CRH())&&(n.searchInput=o.first)}},decls:29,vars:6,consts:[["title","Search"],[3,"scrollEvents"],[1,"ion-text-center"],[1,"heading1-text"],[2,"position","relative"],[1,"clear-btn-wrapper"],["name","close-outline",1,"clear-btn",3,"click"],["placeholder","Enter converter code ...","enterkeyhint","Search","debounce","500",3,"ngModel","ngModelChange","ionInput","ionChange","keyup.enter"],["search",""],[1,"ion-padding-start","ion-padding-end"],[1,"find-text-container"],[1,"paragraph-text-14","vertical-center"],["expand","block",1,"view-generics-button",3,"click"],[1,"ion-padding-end"],[4,"ngIf"],["vertical","bottom","horizontal","start","slot","fixed",1,"fab"],["id","search-modal","color","dark",3,"click"],["src","/assets/icon/add-code.svg"],["trigger","search-modal",3,"animated","didDismiss"],["modal",""],["ngFor","",3,"ngForOf"],[3,"code"],[1,"lot-content"],["mode","ios",1,"modal-toolbar"],["slot","start"],[1,"paragraph-text-14-bold"],["slot","end"],["color","light",3,"click"],["name","close-outline"],["position","stacked black-500",1,"black-500","paragraph-text-14-bold"],["interface","action-sheet","placeholder","Select lot ",1,"lot-select","black-500",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["position","stacked",1,"black-500","paragraph-text-14-bold"],["placeholder","Input code name",1,"lot-input",3,"ngModel","ngModelChange"],["placeholder","Input unit price","type","number",1,"lot-input",3,"ngModel","ngModelChange","keydown","ionBlur","ionInput"],["mode","ios","pin","true","min","0","max","100","step","10",3,"ngModel","ngModelChange","ionChange"],["slot","start",1,"black-500"],["slot","end",1,"black-500"],[1,"modal-footer"],[1,"footer-button"],["color","dark",1,"ion-text-capitalize",3,"click"],[1,"paragraph-text-16-semibold"],[1,"add-lot-button",3,"click"],[1,"paragraph-text-16-semibold","white"],[3,"value"]],template:function(t,n){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-card")(3,"ion-card-header",2)(4,"ion-card-title",3),e._uU(5,"Search by Code"),e.qZA()(),e.TgZ(6,"ion-card-content",4)(7,"div",5)(8,"ion-icon",6),e.NdJ("click",function(){return n.searchCode=""}),e.qZA()(),e.TgZ(9,"ion-input",7,8),e.NdJ("ngModelChange",function(c){return n.searchCode=c})("ionInput",function(c){return n.onClearEmpty(c)})("ionChange",function(c){return n.onSearch(c)})("keyup.enter",function(c){return n.keyEnter(c)}),e.qZA()()(),e.TgZ(11,"ion-grid",9)(12,"ion-row")(13,"ion-col",10)(14,"ion-text",11),e._uU(15,"Not Finding Your Code?"),e.qZA()(),e.TgZ(16,"ion-col")(17,"ion-button",12),e.NdJ("click",function(){return n.goToGenerics()}),e._uU(18,"View Generics"),e.qZA()()()(),e.TgZ(19,"div",13),e.YNc(20,y,2,0,"div",14),e.YNc(21,A,1,1,null,14),e.YNc(22,I,2,0,"div",14),e.qZA(),e.TgZ(23,"ion-fab",15)(24,"ion-fab-button",16),e.NdJ("click",function(){return n.fetchLots()}),e._UZ(25,"ion-icon",17),e.qZA()(),e.TgZ(26,"ion-modal",18,19),e.NdJ("didDismiss",function(){return n.reset()}),e.YNc(28,k,50,6,"ng-template"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("scrollEvents",!0),e.xp6(8),e.Q6J("ngModel",n.searchCode),e.xp6(11),e.Q6J("ngIf",n.isLoading&&!n.dataCodes.data),e.xp6(1),e.Q6J("ngIf",n.dataCodes.data),e.xp6(1),e.Q6J("ngIf",n.isLoading&&n.dataCodes.data),e.xp6(4),e.Q6J("animated",!1))},dependencies:[l.sg,l.O5,h.JJ,h.On,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.Dq,a.wI,a.W2,a.IJ,a.W4,a.fr,a.jY,a.gu,a.pK,a.Q$,a.I_,a.Nd,a.t9,a.n0,a.yW,a.sr,a.ki,a.as,a.QI,a.j9,b.G,T.O,Z.f],styles:[".view-generics-button[_ngcontent-%COMP%]{--background: #000;--border-radius: 12px;height:46px}.find-text-container[_ngcontent-%COMP%]{position:relative}.vertical-center[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;transform:translateY(-50%)}ion-input[_ngcontent-%COMP%]{--background: #fff;border-radius:12px;--padding-start: 16px;--padding-end: 16px;--padding-top: 15px;--padding-bottom: 15px;--color: #000;height:46px;font-size:18px}ion-modal[_ngcontent-%COMP%]{--height: 520px;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--background: #fff;overflow:auto;align-items:flex-start;padding-top:2.5rem}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:#000000;opacity:.5}.lot-content[_ngcontent-%COMP%]::part(background){--background: #fff}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgb(255, 255, 255);--color: rgb(0, 0, 0)}.modal-toolbar[_ngcontent-%COMP%]{padding:13px;border-bottom:1px solid #eff2f5}.lot-input[_ngcontent-%COMP%]{--background: #f3f7f9}ion-item[_ngcontent-%COMP%]::part(native){border:0px}ion-label[_ngcontent-%COMP%]{padding-bottom:16px}.lot-range[_ngcontent-%COMP%]{display:flex;width:100%}ion-modal[_ngcontent-%COMP%]::part(content){--width: 90%;max-width:512px;--border-radius: 6px}ion-footer[_ngcontent-%COMP%]{position:relative;padding-top:48px;padding-bottom:32px}.footer-toolbar[_ngcontent-%COMP%]{position:relative}.footer-group-button[_ngcontent-%COMP%]{width:100%}.footer-button[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;bottom:5px}.add-lot-button[_ngcontent-%COMP%]{--background: #000;text-transform:capitalize;height:40px}.lot-select[_ngcontent-%COMP%]{background-color:#f3f7f9;padding:10px;border-radius:12px}ion-card[_ngcontent-%COMP%]{margin:15px}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #eff2f5}ion-range[_ngcontent-%COMP%]{padding-top:0}.clear-btn[_ngcontent-%COMP%]{color:var(--ion-background-color);font-size:32px;z-index:10}.clear-btn-wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;height:46px;right:26px;width:32px;flex-direction:column;justify-content:center;z-index:10}"]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(w),g.Bz]}),i})();var J=r(1075);let U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.ez,h.u5,a.Pc,E,J.m]}),i})()}}]);