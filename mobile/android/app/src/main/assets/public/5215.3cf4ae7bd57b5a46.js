"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5215],{5196:(v,h,a)=>{a.d(h,{N1:()=>d,sy:()=>i});var l=a(7423),i=(()=>{return(s=i||(i={})).Body="body",s.Ionic="ionic",s.Native="native",s.None="none",i;var s})();const d=(0,l.fo)("Keyboard")},3866:(v,h,a)=>{a.d(h,{G:()=>b});var l=a(7631),m=a(1065),i=a(6895),d=a(2478);function s(u,f){1&u&&(l.TgZ(0,"ion-buttons",6),l._UZ(1,"ion-img",7),l.qZA())}function p(u,f){if(1&u&&(l.TgZ(0,"ion-title"),l._uU(1),l.qZA()),2&u){const e=l.oxw();l.xp6(1),l.Oqu(e.title)}}function _(u,f){1&u&&l._UZ(0,"ion-img",8)}let b=(()=>{class u{constructor(e){this.route=e,this.isHome=!1}ngOnInit(){}goToSettings(){this.route.navigate(["/settings"])}}return u.\u0275fac=function(e){return new(e||u)(l.Y36(m.F0))},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-header"]],inputs:{title:"title",isHome:"isHome"},decls:7,vars:3,consts:[["mode","ios"],["slot","start",4,"ngIf"],[4,"ngIf"],["class","header-ion-logo","src","/assets/cm-logo-home.svg",4,"ngIf"],["slot","end"],["src","/assets/icon/settings.svg",1,"header-ion-icon-settings",3,"click"],["slot","start"],["src","/assets/cm-logo-header.svg",1,"header-ion-icon-logo"],["src","/assets/cm-logo-home.svg",1,"header-ion-logo"]],template:function(e,C){1&e&&(l.TgZ(0,"ion-header")(1,"ion-toolbar",0),l.YNc(2,s,2,0,"ion-buttons",1),l.YNc(3,p,2,1,"ion-title",2),l.YNc(4,_,1,0,"ion-img",3),l.TgZ(5,"ion-buttons",4)(6,"ion-img",5),l.NdJ("click",function(){return C.goToSettings()}),l.qZA()()()()),2&e&&(l.xp6(2),l.Q6J("ngIf",!C.isHome),l.xp6(1),l.Q6J("ngIf",!C.isHome),l.xp6(1),l.Q6J("ngIf",C.isHome))},dependencies:[i.O5,d.Sm,d.Gu,d.Xz,d.wd,d.sr],styles:[".header-ion-icon-logo[_ngcontent-%COMP%]{padding-left:8px;padding-right:3px;width:43px}.header-ion-icon-settings[_ngcontent-%COMP%]{padding-left:8px;padding-right:5px;width:41px;height:41px}.header-ion-logo[_ngcontent-%COMP%]{width:100%;height:35px;position:absolute;top:4px}ion-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}"]}),u})()},1075:(v,h,a)=>{a.d(h,{m:()=>s});var l=a(6895),m=a(4719),i=a(2478),d=a(7631);let s=(()=>{class p{}return p.\u0275fac=function(b){return new(b||p)},p.\u0275mod=d.oAB({type:p}),p.\u0275inj=d.cJS({imports:[l.ez,m.u5,i.Pc]}),p})()},5215:(v,h,a)=>{a.r(h),a.d(h,{SearchPageModule:()=>K});var l=a(6895),m=a(4719),i=a(2478),d=a(1065),s=a(5861),p=a(7423),_=a(5196),b=a(2198),u=a(8532),f=a(9),e=a(7631),C=a(3493),x=a(4190),P=a(1253),M=a(3866),y=a(9e3),S=a(1687);const T=["search"];function Z(r,g){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-skeleton-list-loader"),e.qZA())}function O(r,g){1&r&&e._UZ(0,"app-generic-code-card",21),2&r&&e.Q6J("code",g.$implicit)}function A(r,g){if(1&r&&e.YNc(0,O,1,1,"ng-template",20),2&r){const t=e.oxw();e.Q6J("ngForOf",t.dataCodes.data)}}function I(r,g){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-skeleton-list-loader"),e.qZA())}function N(r,g){if(1&r&&(e.TgZ(0,"ion-select-option",44),e._uU(1),e.qZA()),2&r){const t=g.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.lotName)}}function k(r,g){if(1&r){const t=e.EpF();e.TgZ(0,"ion-content",22)(1,"ion-toolbar",23)(2,"ion-buttons",24)(3,"ion-text",25),e._uU(4,"Add a New Code and Add to Lot"),e.qZA()(),e.TgZ(5,"ion-buttons",26)(6,"ion-button",27),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(27);return e.KtG(o.dismiss())}),e._UZ(7,"ion-icon",28),e.qZA()()(),e.TgZ(8,"ion-grid")(9,"ion-row")(10,"ion-col")(11,"ion-label",29),e._uU(12,"Lot Name"),e.qZA()()(),e.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-select",30),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.lotId=o)}),e.YNc(16,N,2,2,"ion-select-option",31),e.qZA()()(),e.TgZ(17,"ion-row")(18,"ion-col")(19,"ion-label",32),e._uU(20,"Code"),e.qZA()()(),e.TgZ(21,"ion-row")(22,"ion-col")(23,"ion-input",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.codeName=o)}),e.qZA()()(),e.TgZ(24,"ion-row")(25,"ion-col")(26,"ion-label",32),e._uU(27,"Item Price"),e.qZA()()(),e.TgZ(28,"ion-row")(29,"ion-col")(30,"ion-input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.price=o)})("keydown",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onPriceKeyDown(o))})("ionBlur",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onBlurPrice(o))})("ionInput",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onInputPrice(o))}),e.qZA()()(),e.TgZ(31,"ion-row")(32,"ion-col")(33,"ion-label",32),e._uU(34,"Item Fullness %"),e.qZA()()(),e.TgZ(35,"ion-row")(36,"ion-col")(37,"ion-range",35),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.fullness=o)})("ionChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onChangeFullness())}),e.TgZ(38,"ion-text",36),e._uU(39,"0"),e.qZA(),e.TgZ(40,"ion-text",37),e._uU(41,"100"),e.qZA()()()()(),e.TgZ(42,"ion-footer",38)(43,"div",39)(44,"ion-button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCancelAddCode())}),e.TgZ(45,"ion-text",41),e._uU(46,"Cancel"),e.qZA()(),e.TgZ(47,"ion-button",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addCode())}),e.TgZ(48,"ion-text",43),e._uU(49,"Add to Lot"),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(15),e.Q6J("ngModel",t.lotId),e.xp6(1),e.Q6J("ngForOf",t.lots),e.xp6(7),e.Q6J("ngModel",t.codeName),e.xp6(7),e.Q6J("ngModel",t.price),e.xp6(7),e.Q6J("ngModel",t.fullness),e.xp6(10),e.uIk("disabled",!t.lotId||!t.codeName||t.price<0||null==t.price)}}const w=[{path:"",component:(()=>{class r{constructor(t,n,o,c,D,U,H){this.route=t,this.codesService=n,this.lotsService=o,this.lotItemsService=c,this.loadingCtrl=D,this.modalCtrl=U,this.animationCtrl=H,this.dataCodes={data:[],pagination:null},this.searchCode="",this.isLoading=!1,this.fullness=100,this.codeName="",this.lotId="",this.isActivePage=!0,this.searchCounter=0,this.navigationSubscription=t.events.pipe((0,b.h)(L=>L instanceof d.OD)).subscribe(()=>{this.search()})}ngOnInit(){p.dV.isPluginAvailable("PushNotifications")&&this.initializeFCM()}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}ngAfterViewInit(){var t=this;p.dV.isPluginAvailable("Keyboard")&&(_.N1.addListener("keyboardWillShow",function(){var n=(0,s.Z)(function*(o){t.isActivePage&&(yield _.N1.setResizeMode({mode:_.sy.None}),yield t.animationCtrl.create().addElement(document.querySelector(".fab")).duration(300).iterations(1).easing("cubic-bezier(.17, .59, .4, .77)").to("transform",`translateY(-${o.keyboardHeight}px)`).play())});return function(o){return n.apply(this,arguments)}}()),_.N1.addListener("keyboardWillHide",(0,s.Z)(function*(){yield t.animateKeyboardDown()})))}ionViewDidEnter(){this.isActivePage=!0}ionViewWillLeave(){this.isActivePage=!1}initializeFCM(){var t=this;return(0,s.Z)(function*(){yield u.V.addListener("pushNotificationReceived",()=>{t.search()})})()}fetchLots(){var t=this;return(0,s.Z)(function*(){t.lots=yield t.lotsService.lots({pageNumber:1,pageSize:66955359,searchCategory:"isSubmitted",searchQuery:"false"})})()}keyEnter(t){var n=this;return(0,s.Z)(function*(){_.N1.hide(),yield n.animateKeyboardDown(),(yield n.searchInput.getInputElement()).blur()})()}goToGenerics(){this.route.navigate(["/generics"])}onSearch(t){this.searchCode=t.target?.value,this.search().then(o=>{}).catch(o=>{this.isLoading=!1})}search(){var t=this;return(0,s.Z)(function*(){return t.searchCode?(t.subscribed&&t.subscribed.unsubscribe(),t.isLoading=!0,t.subscribed=t.codesService.codes({searchCategory:"converterName",searchQuery:t.searchCode,pageSize:24,pageNumber:1,isCustom:!0,isAdmin:!0}).subscribe(o=>{t.dataCodes=o.body,t.isLoading=!1})):(t.dataCodes.data=[],t.isLoading=!1),{data:[],pagination:null}})()}onClearEmpty(t){t.target?.value||(this.dataCodes.data=[])}addCode(){var t=this;return(0,s.Z)(function*(){const n=yield t.loadingCtrl.create({message:"Adding to lot ...."});n.present(),t.lotsService.setSelectedLot=t.lots.find(c=>c.id===t.lotId),(yield t.lotItemsService.addCodeToLot({lotId:t.lotId,converterName:t.codeName,originalPrice:t.price,fullnessPercentage:t.fullness}))&&t.reset(),t.modalCtrl.dismiss(),n.dismiss(),t.route.navigate(["lot-list"])})()}onPriceKeyDown(t){("e"===t.key||"."===t.key)&&t.preventDefault()}onInputPrice(t){this.fullness=100,this.fullPrice=0}onBlurPrice(t){this.fullPrice=t.target.value}onChangeFullness(){this.price=(0,f.q)(this.fullness,this.fullPrice)}reset(){this.fullness=100,this.codeName="",this.price=null,this.fullPrice=null}onCancelAddCode(){this.modalCtrl.dismiss(),this.reset()}animateKeyboardDown(){var t=this;return(0,s.Z)(function*(){yield t.animationCtrl.create().addElement(document.querySelector(".fab")).duration(300).iterations(1).easing("cubic-bezier(.17, .59, .4, .77)").to("transform","translateY(0)").play(),yield _.N1.setResizeMode({mode:_.sy.Native})})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.F0),e.Y36(C.a),e.Y36(x.s),e.Y36(P.e),e.Y36(i.HT),e.Y36(i.IN),e.Y36(i.vB))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-search"]],viewQuery:function(t,n){if(1&t&&e.Gf(T,5),2&t){let o;e.iGM(o=e.CRH())&&(n.searchInput=o.first)}},decls:29,vars:7,consts:[["title","Search"],[3,"scrollEvents"],[1,"ion-text-center"],[1,"heading1-text"],[2,"position","relative"],[1,"clear-btn-wrapper"],["name","close-outline",1,"clear-btn",3,"click"],["placeholder","Enter converter code ...","enterkeyhint","Search",3,"ngModel","debounce","ngModelChange","ionInput","ionChange","keyup.enter"],["search",""],[1,"ion-padding-start","ion-padding-end"],[1,"find-text-container"],[1,"paragraph-text-14","vertical-center"],["expand","block",1,"view-generics-button",3,"click"],[1,"ion-padding-end"],[4,"ngIf"],["vertical","bottom","horizontal","start","slot","fixed",1,"fab"],["id","search-modal","color","dark",3,"click"],["src","/assets/icon/add-code.svg"],["trigger","search-modal",3,"animated","didDismiss"],["modal",""],["ngFor","",3,"ngForOf"],[3,"code"],[1,"lot-content"],["mode","ios",1,"modal-toolbar"],["slot","start"],[1,"paragraph-text-14-bold"],["slot","end"],["color","light",3,"click"],["name","close-outline"],["position","stacked black-500",1,"black-500","paragraph-text-14-bold"],["interface","action-sheet","placeholder","Select lot ",1,"lot-select","black-500",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["position","stacked",1,"black-500","paragraph-text-14-bold"],["placeholder","Input code name",1,"lot-input",3,"ngModel","ngModelChange"],["placeholder","Input unit price","type","number",1,"lot-input",3,"ngModel","ngModelChange","keydown","ionBlur","ionInput"],["mode","ios","pin","true","min","0","max","100","step","10",3,"ngModel","ngModelChange","ionChange"],["slot","start",1,"black-500"],["slot","end",1,"black-500"],[1,"modal-footer"],[1,"footer-button"],["color","dark",1,"ion-text-capitalize",3,"click"],[1,"paragraph-text-16-semibold"],[1,"add-lot-button",3,"click"],[1,"paragraph-text-16-semibold","white"],[3,"value"]],template:function(t,n){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-card")(3,"ion-card-header",2)(4,"ion-card-title",3),e._uU(5,"Search by Code"),e.qZA()(),e.TgZ(6,"ion-card-content",4)(7,"div",5)(8,"ion-icon",6),e.NdJ("click",function(){return n.searchCode=""}),e.qZA()(),e.TgZ(9,"ion-input",7,8),e.NdJ("ngModelChange",function(c){return n.searchCode=c})("ionInput",function(c){return n.onClearEmpty(c)})("ionChange",function(c){return n.onSearch(c)})("keyup.enter",function(c){return n.keyEnter(c)}),e.qZA()()(),e.TgZ(11,"ion-grid",9)(12,"ion-row")(13,"ion-col",10)(14,"ion-text",11),e._uU(15,"Not Finding Your Code?"),e.qZA()(),e.TgZ(16,"ion-col")(17,"ion-button",12),e.NdJ("click",function(){return n.goToGenerics()}),e._uU(18,"View Generics"),e.qZA()()()(),e.TgZ(19,"div",13),e.YNc(20,Z,2,0,"div",14),e.YNc(21,A,1,1,null,14),e.YNc(22,I,2,0,"div",14),e.qZA(),e.TgZ(23,"ion-fab",15)(24,"ion-fab-button",16),e.NdJ("click",function(){return n.fetchLots()}),e._UZ(25,"ion-icon",17),e.qZA()(),e.TgZ(26,"ion-modal",18,19),e.NdJ("didDismiss",function(){return n.reset()}),e.YNc(28,k,50,6,"ng-template"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("scrollEvents",!0),e.xp6(8),e.Q6J("ngModel",n.searchCode)("debounce",600),e.xp6(11),e.Q6J("ngIf",n.isLoading&&!n.dataCodes.data),e.xp6(1),e.Q6J("ngIf",n.dataCodes.data),e.xp6(1),e.Q6J("ngIf",n.isLoading&&n.dataCodes.data),e.xp6(4),e.Q6J("animated",!1))},dependencies:[l.sg,l.O5,m.JJ,m.On,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.Dq,i.wI,i.W2,i.IJ,i.W4,i.fr,i.jY,i.gu,i.pK,i.Q$,i.I_,i.Nd,i.t9,i.n0,i.yW,i.sr,i.ki,i.as,i.QI,i.j9,M.G,y.O,S.f],styles:[".view-generics-button[_ngcontent-%COMP%]{--background: #000;--border-radius: 12px;height:46px}.find-text-container[_ngcontent-%COMP%]{position:relative}.vertical-center[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;transform:translateY(-50%)}ion-input[_ngcontent-%COMP%]{--background: #fff;border-radius:12px;--padding-start: 16px;--padding-end: 16px;--padding-top: 15px;--padding-bottom: 15px;--color: #000;height:46px;font-size:18px}ion-modal[_ngcontent-%COMP%]{--height: 520px;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--background: #fff;overflow:auto;align-items:flex-start;padding-top:2.5rem}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:#000000;opacity:.5}.lot-content[_ngcontent-%COMP%]::part(background){--background: #fff}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgb(255, 255, 255);--color: rgb(0, 0, 0)}.modal-toolbar[_ngcontent-%COMP%]{padding:13px;border-bottom:1px solid #eff2f5}.lot-input[_ngcontent-%COMP%]{--background: #f3f7f9}ion-item[_ngcontent-%COMP%]::part(native){border:0px}ion-label[_ngcontent-%COMP%]{padding-bottom:16px}.lot-range[_ngcontent-%COMP%]{display:flex;width:100%}ion-modal[_ngcontent-%COMP%]::part(content){--width: 90%;max-width:512px;--border-radius: 6px}ion-footer[_ngcontent-%COMP%]{position:relative;padding-top:48px;padding-bottom:32px}.footer-toolbar[_ngcontent-%COMP%]{position:relative}.footer-group-button[_ngcontent-%COMP%]{width:100%}.footer-button[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;bottom:5px}.add-lot-button[_ngcontent-%COMP%]{--background: #000;text-transform:capitalize;height:40px}.lot-select[_ngcontent-%COMP%]{background-color:#f3f7f9;padding:10px;border-radius:12px}ion-card[_ngcontent-%COMP%]{margin:15px}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #eff2f5}ion-range[_ngcontent-%COMP%]{padding-top:0}.clear-btn[_ngcontent-%COMP%]{color:var(--ion-background-color);font-size:32px;z-index:10}.clear-btn-wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;height:46px;right:26px;width:32px;flex-direction:column;justify-content:center;z-index:10}"]}),r})()}];let E=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.Bz.forChild(w),d.Bz]}),r})();var J=a(1075);let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.ez,m.u5,i.Pc,E,J.m]}),r})()}}]);