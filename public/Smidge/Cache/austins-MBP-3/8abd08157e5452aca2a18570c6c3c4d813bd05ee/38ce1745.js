(function(){"use strict";function publishActionManager(){function getActionMessage(action){return{title:action.Name,Steps:action.Steps}}function getDialogTitle(action){return action.Name}function getDescription(mode,contentType,serverName){var modeName=mode==="SettingsPush"?"Push":mode,direction=mode==="pull"?" from ":" to ";return capitalizeFirstLetter(modeName+" "+contentType+direction+serverName)}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}function hasStepActions(action){for(let n=0;n<action.Steps.length;n++)if(action.Steps[n].IsAction==!0)return!0;return!1}function initFlags(){return{includeAncestors:{toggle:!1,value:!1},includeChildren:{toggle:!0,value:!0},includeDecendants:{toggle:!1,value:!0},deleteMissing:{toggle:!0,value:!1},includeDependencies:{toggle:!1,value:!1},includeFiles:{toggle:!1,value:!1},includeMedia:{toggle:!0,value:!0},includeMediaFiles:{toggle:!1,value:!1},includeLinked:{toggle:!0,value:!1},includeConfig:{toggle:!1,value:!0}}}function prepToggles(server,flags,contentType){var op=server.sendSettings;return op!==undefined&&(flags.includeAncestors=setToggle(op.includeAncestors),flags.includeChildren=setToggle(op.includeChildren),flags.includeDecendants=setToggle(op.includeDecendants),flags.deleteMissing=setToggle(op.deleteMissing),flags.includeDependencies=setToggle(op.includeDependencies),flags.includeFiles=setToggle(op.includeFiles),flags.includeMedia=setToggle(op.includeMedia),flags.includeMediaFiles=setToggle(op.includeMediaFiles),flags.includeLinked=setToggle(op.includeLinked),flags.includeConfig=setToggle(op.includeConfig),contentType==="media"&&(flags.includeMedia={toggle:!1,value:!0},flags.includeAncestors={toggle:!1,value:!0},flags.includeFiles={toggle:!1,value:!1},flags.includeLinked={toggle:!1,value:!1})),flags}function setToggle(value){return value!==undefined&&value.startsWith("user")?{toggle:!0,value:value.endsWith("yes")}:{toggle:!1,value:value==="yes"}}function mergeResults(source,target){var targetAction,indexOfAction;if(source===null||source===undefined)return target;(target===undefined||target===null)&&(target=[]);for(let i=0;i<source.length;i++)targetAction=_.findWhere(target,{key:source[i].key}),targetAction!==undefined?source[i].change!=="NoChange"&&source[i].change!=="Import"&&(indexOfAction=_.indexOf(target,targetAction),target[indexOfAction]=source[i]):target.push(source[i]);return target}function mergeDependencies(source,target){var targetDependency,index;if(source===null||source===undefined)return target;(target===undefined||target===null)&&(target=[]);for(let i=0;i<source.length;i++)targetDependency=_.findWhere(target,{Udi:source[i].Udi}),targetDependency!==undefined?(index=_.indexOf(target,targetDependency),target[index]=source[i]):target.push(source[i]);return target}return{initFlags:initFlags,prepToggles:prepToggles,hasStepActions:hasStepActions,getDialogTitle:getDialogTitle,getActionMessage:getActionMessage,getDescription:getDescription,emptyGuid:"00000000-0000-0000-0000-000000000000",mergeResults:mergeResults,mergeDependencies:mergeDependencies}}angular.module("umbraco").factory("uSyncActionManager",publishActionManager)})()