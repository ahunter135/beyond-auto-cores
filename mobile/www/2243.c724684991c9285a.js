"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2243],{4190:(I,h,s)=>{s.d(h,{s:()=>t});var p=s(4850),f=s(7221),r=s(2868),v=s(591),u=s(1737),y=s(7631),b=s(1102);let t=(()=>{class _{constructor(c){this.rest=c,this.isLoadingMore=!1,this.selectLotStateSubject=new v.X(null)}get selectedLot(){return this.selectLotStateSubject.value}set setSelectedLot(c){this.selectLotStateSubject.next(c)}lots(c){return this.rest.get({endpoint:"/lots",params:c}).pipe((0,p.U)(a=>{const{data:d}=a.body;return d}),(0,f.K)(a=>(0,u._)(a))).toPromise()}inventory(c){return this.rest.get({endpoint:"/lots/inventory",params:c}).pipe((0,p.U)(a=>{const{data:d,pagination:m}=a.body;return{data:d,pagination:m}}),(0,f.K)(a=>(0,u._)(a))).toPromise()}inventorySummary(c){return this.rest.get({endpoint:"/lots/inventorysummary",params:c}).pipe((0,p.U)(a=>{const{data:d,pagination:m}=a.body;return{data:d,pagination:m}}),(0,f.K)(a=>(0,u._)(a))).toPromise()}nextInventory(c){return this.isLoadingMore=!0,this.rest.get({endpoint:c,server:"none"}).pipe((0,p.U)(a=>{const{data:d,pagination:m}=a.body;return{data:d,pagination:m}}),(0,r.b)(()=>this.isLoadingMore=!1),(0,f.K)(a=>(0,u._)(a))).toPromise()}addlot(c){return this.rest.post("/lots",c).pipe((0,p.U)(a=>{const{data:d}=a.body;return d}),(0,f.K)(a=>(0,u._)(a))).toPromise()}submitLot(c){return this.rest.post({endpoint:"/lots/submit",params:{lotId:c.lotId,businessName:c.businessName,email:c.email}},c.formData,!1,!0).pipe((0,p.U)(a=>{const{data:d}=a.body;return d}),(0,f.K)(a=>(0,u._)(a))).toPromise()}}return _.\u0275fac=function(c){return new(c||_)(y.LFG(b.v))},_.\u0275prov=y.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},2243:(I,h,s)=>{s.r(h),s.d(h,{InventoryPageModule:()=>k});var p=s(6895),f=s(4719),r=s(2478),v=s(1065),u=s(5861),y=s(9),b=s(4300),t=s(7631),_=s(4190),P=s(5904),c=s(3866),a=s(1687);const d=["content"];function m(o,l){1&o&&(t.TgZ(0,"div"),t._UZ(1,"app-skeleton-list-loader"),t.qZA())}function M(o,l){if(1&o&&(t.TgZ(0,"ion-text",22),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij("Invoice: ",n.invoiceNo,"")}}function C(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"ion-card",14),t.NdJ("click",function(){const g=t.CHM(n).$implicit,x=t.oxw();return t.KtG(x.goToLotList(g))}),t.TgZ(1,"ion-card-content",15)(2,"ion-row")(3,"ion-col",16)(4,"ion-text",17),t._uU(5),t.qZA(),t._UZ(6,"br"),t.YNc(7,M,2,1,"ion-text",18),t.qZA(),t.TgZ(8,"ion-col",19)(9,"ion-text",20),t._uU(10),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"ion-text",20),t._uU(13,"Average: "),t.qZA(),t.TgZ(14,"ion-text",20),t._uU(15),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"ion-text",20),t._uU(18,"Total: "),t.qZA(),t.TgZ(19,"ion-text",20),t._uU(20),t.qZA()(),t.TgZ(21,"ion-col",21)(22,"ion-text",22),t._uU(23),t.qZA()()()()()}if(2&o){const n=l.$implicit,e=t.oxw();t.xp6(5),t.Oqu(n.lotName),t.xp6(2),t.Q6J("ngIf","active"!==e.defaultSegment),t.xp6(3),t.hij("Quantity: ",n.quantity||0," "),t.xp6(5),t.Oqu(e.formatPrice(n.average||0)),t.xp6(5),t.Oqu(e.formatPrice(n.total||0)),t.xp6(3),t.Oqu(e.formatDate(n.createdOn))}}function Z(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"ion-infinite-scroll",23),t.NdJ("ionInfinite",function(i){t.CHM(n);const g=t.oxw();return t.KtG(g.onIonInfinite(i))}),t._UZ(1,"ion-infinite-scroll-content"),t.qZA()}}function T(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"ion-infinite-scroll",23),t.NdJ("ionInfinite",function(i){t.CHM(n);const g=t.oxw();return t.KtG(g.onIonInfinite(i))}),t._UZ(1,"ion-infinite-scroll-content"),t.qZA()}}function O(o,l){1&o&&(t.TgZ(0,"ion-text",24),t._uU(1,"Create a New Inventory Lot"),t.qZA())}function S(o,l){1&o&&(t.TgZ(0,"ion-text",24),t._uU(1,"Upgrade your Subscription to Create Lots"),t.qZA())}function L(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"ion-content",25)(1,"ion-toolbar",26)(2,"ion-buttons",27)(3,"ion-text",28),t._uU(4,"Add New Lot"),t.qZA()(),t.TgZ(5,"ion-buttons",29)(6,"ion-button",30),t.NdJ("click",function(){t.CHM(n),t.oxw();const i=t.MAs(20);return t.KtG(i.dismiss())}),t._UZ(7,"ion-icon",31),t.qZA()()(),t.TgZ(8,"div",32)(9,"ion-text",33),t._uU(10,"Lot Name"),t.qZA()(),t.TgZ(11,"div",1)(12,"ion-input",34),t.NdJ("ngModelChange",function(i){t.CHM(n);const g=t.oxw();return t.KtG(g.lotName=i)}),t.qZA()(),t.TgZ(13,"ion-footer",35)(14,"div",36)(15,"ion-button",37),t.NdJ("click",function(){t.CHM(n),t.oxw();const i=t.MAs(20);return t.KtG(i.dismiss())}),t.TgZ(16,"ion-text",24),t._uU(17,"Cancel"),t.qZA()(),t.TgZ(18,"ion-button",38),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onCreateLot())}),t.TgZ(19,"ion-text",39),t._uU(20,"Create Lot"),t.qZA()()()()()}if(2&o){const n=t.oxw();t.xp6(12),t.Q6J("ngModel",n.lotName),t.xp6(6),t.uIk("disabled",!n.lotName)}}const U=[{path:"",component:(()=>{class o{constructor(n,e,i,g,x){this.route=n,this.modalCtrl=e,this.lotsService=i,this.loadingCtrl=g,this.accountService=x,this.defaultSegment="active",this.lots={data:[],pagination:null},this.isLoading=!1,this.activeSegment="active",this.userSubscription=0}ionViewWillEnter(){this.onLoad()}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}onLoad(){var n=this;return(0,u.Z)(function*(){n.defaultSegment="active",n.lots={data:[],pagination:null},n.isLoading=!0,n.lots=yield n.lotsService.inventorySummary({pageNumber:1,pageSize:100,searchCategory:"isSubmitted",searchQuery:"false"}),n.userSubscription=n.accountService.currentUser.subscription,n.sortLots(),n.isLoading=!1})()}segmentChanged(n){var e=this;return(0,u.Z)(function*(){e.content.scrollToTop(0);const i=n;e.activeSegment=i.detail.value,i.detail.value!==e.defaultSegment&&(e.isLoading=!0,e.lots={data:[],pagination:null},e.defaultSegment=i.detail.value,e.lots=yield e.lotsService.inventorySummary({pageNumber:1,pageSize:100,..."closed"===e.defaultSegment?{searchCategory:"isSubmitted",searchQuery:"true"}:{searchCategory:"isSubmitted",searchQuery:"false"}}),e.sortLots(),e.isLoading=!1)})()}goToLotList(n){this.lotsService.setSelectedLot=n,this.route.navigate(["/lot-list"])}onCreateLot(){var n=this;return(0,u.Z)(function*(){const e=yield n.loadingCtrl.create({message:"Creating new lot ..."});e.present();const i=yield n.lotsService.addlot({lotName:n.lotName});n.modalCtrl.dismiss(),n.lots.data=[i,...n.lots.data],e.dismiss()})()}onIonInfinite(n){var e=this;return(0,u.Z)(function*(){const i=e.lots?.pagination?.nextPageLink;if(e.isLoading=!0,i&&!e.lotsService.isLoadingMore){const{data:g,pagination:x}=yield e.lotsService.nextInventory(i);e.lots={data:[...e.lots.data,...g],pagination:x}}e.isLoading=!1,e.sortLots(),setTimeout(()=>{n.target.complete()},500)})()}sortLots(){this.lots.data.sort(function n(e,i){return new Date(i.createdOn).getTime()-new Date(e.createdOn).getTime()})}clear(){this.lotName=""}formatDate(n){return(0,b.h)(n,"MM/DD/YYYY")}formatPrice(n){return(0,y.O)(n)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(v.F0),t.Y36(r.IN),t.Y36(_.s),t.Y36(r.HT),t.Y36(P.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-inventory"]],viewQuery:function(n,e){if(1&n&&t.Gf(d,5),2&n){let i;t.iGM(i=t.CRH())&&(e.content=i.first)}},decls:22,vars:10,consts:[["title","Inventory"],[1,"ion-padding"],["mode","ios",3,"value","ionChange"],["value","active"],["value","closed"],[1,"ion-padding-start","ion-padding-end"],["content",""],[4,"ngIf"],["class","inventory-card-item",3,"click",4,"ngFor","ngForOf"],["threshold","200px",3,"ionInfinite",4,"ngIf"],["id","inventory-modal","expand","block",1,"create-inventory-button",3,"disabled","click"],["class","paragraph-text-16-semibold",4,"ngIf"],["trigger","inventory-modal",3,"animated"],["modal",""],[1,"inventory-card-item",3,"click"],[1,"inventory-card-item-content"],["size","4",1,"ion-text-start","inventory-item-col","truncate"],[1,"paragraph-text-14-bold","white"],["class","paragraph-text-10 white",4,"ngIf"],["size","4",1,"ion-text-start","inventory-item-col"],[1,"paragraph-text-12","white"],["size","4",1,"ion-text-center","inventory-item-col"],[1,"paragraph-text-10","white"],["threshold","200px",3,"ionInfinite"],[1,"paragraph-text-16-semibold"],[1,"lot-content"],["mode","ios"],["slot","start"],[1,"paragraph-text-14-bold"],["slot","end"],["color","light",3,"click"],["name","close-outline"],[1,"ion-padding-start","ion-padding-end","ion-padding-top"],[1,"black-500","paragraph-text-14-bold"],["placeholder","12345678",1,"lot-input",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"footer-button"],["color","dark",1,"ion-text-capitalize","cancel-lot-button",3,"click"],[1,"create-lot-button",3,"click"],[1,"paragraph-text-16-semibold","white"]],template:function(n,e){1&n&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"ion-segment",2),t.NdJ("ionChange",function(g){return e.segmentChanged(g)}),t.TgZ(3,"ion-segment-button",3)(4,"ion-label"),t._uU(5,"Active"),t.qZA()(),t.TgZ(6,"ion-segment-button",4)(7,"ion-label"),t._uU(8,"Closed"),t.qZA()()()(),t.TgZ(9,"ion-content",5,6),t.YNc(11,m,2,0,"div",7),t.YNc(12,C,24,6,"ion-card",8),t.YNc(13,Z,2,0,"ion-infinite-scroll",9),t.YNc(14,T,2,0,"ion-infinite-scroll",9),t.qZA(),t.TgZ(15,"ion-footer",1)(16,"ion-button",10),t.NdJ("click",function(){return e.clear()}),t.YNc(17,O,2,0,"ion-text",11),t.YNc(18,S,2,0,"ion-text",11),t.qZA()(),t.TgZ(19,"ion-modal",12,13),t.YNc(21,L,21,2,"ng-template"),t.qZA()),2&n&&(t.xp6(2),t.Q6J("value",e.activeSegment),t.uIk("disabled",e.isLoading),t.xp6(9),t.Q6J("ngIf",e.isLoading&&!e.lots.data),t.xp6(1),t.Q6J("ngForOf",e.lots.data),t.xp6(1),t.Q6J("ngIf","active"===e.defaultSegment),t.xp6(1),t.Q6J("ngIf","closed"===e.defaultSegment),t.xp6(2),t.Q6J("disabled",1==e.userSubscription),t.xp6(1),t.Q6J("ngIf",2==e.userSubscription||3==e.userSubscription),t.xp6(1),t.Q6J("ngIf",1==e.userSubscription),t.xp6(1),t.Q6J("animated",!1))},dependencies:[p.sg,p.O5,f.JJ,f.On,r.YG,r.Sm,r.PM,r.FN,r.wI,r.W2,r.fr,r.gu,r.ju,r.MB,r.pK,r.Q$,r.Nd,r.cJ,r.GO,r.yW,r.sr,r.ki,r.QI,r.j9,c.G,a.f],styles:["ion-segment-button[_ngcontent-%COMP%]{--color: #ffffff80;--background-checked: #000;--color-checked: #000000;--indicator-color: #ffffff}ion-segment[_ngcontent-%COMP%]{--background: #000000;--color: #ffffff80;width:250px;margin:auto}.create-inventory-button[_ngcontent-%COMP%]{--background: #000;--border-radius: 12px;height:46px;text-transform:capitalize}ion-footer[_ngcontent-%COMP%]{border:0px}.inventory-card-item[_ngcontent-%COMP%]{padding:0!important;margin:10px 0!important;height:86px}ion-modal[_ngcontent-%COMP%]{--height: 264px;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--background: #fff;overflow:auto}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #eff2f5}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:#000000;opacity:.5}.lot-content[_ngcontent-%COMP%]::part(background){--background: #fff}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgb(255, 255, 255);--color: rgb(0, 0, 0)}.lot-input[_ngcontent-%COMP%]{--background: #f3f7f9;border-radius:6px;border:1px solid #f3f7f9}ion-item[_ngcontent-%COMP%]::part(native){border:0px}.lot-range[_ngcontent-%COMP%]{display:flex;width:100%}ion-modal[_ngcontent-%COMP%]::part(content){--width: 90%;max-width:512px;--border-radius: 6px}ion-footer[_ngcontent-%COMP%]{position:relative;padding-top:20px}.footer-group-button[_ngcontent-%COMP%]{width:100%}.footer-button[_ngcontent-%COMP%]{position:absolute;top:15px;right:0;bottom:5px}.create-lot-button[_ngcontent-%COMP%]{--background: #000;text-transform:capitalize;height:40px}ion-input[_ngcontent-%COMP%]{--background: #fff;border-radius:12px;--padding-start: 10px;--padding-end: 10px;--color: #000}.inventory-item-col[_ngcontent-%COMP%]{line-height:12px}.create-lot-button[_ngcontent-%COMP%]{border-radius:6px;--background: #000000;width:144px;height:40px;margin-right:22px}.cancel-lot-button[_ngcontent-%COMP%]{border-radius:6px;width:85px;height:40px}ion-toolbar[_ngcontent-%COMP%]{padding:13px;border-bottom:1px solid #eff2f5}"]}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.Bz.forChild(U),v.Bz]}),o})();var N=s(1075);let k=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,f.u5,r.Pc,A,N.m]}),o})()}}]);