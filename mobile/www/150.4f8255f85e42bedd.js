"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[150],{150:(z,u,a)=>{a.r(u),a.d(u,{jeep_photo_buttons:()=>m,jeep_photo_hscroll:()=>p,jeep_photo_share:()=>_,jeep_photo_swipe:()=>g,jeep_photo_zoom:()=>f,jeep_photoviewer:()=>w});var o=a(5861),i=a(14);const l=e=>window.btoa(e),S="url('data:image/svg+xml;base64,"+l("<svg xmlns='http://www.w3.org/2000/svg'  viewBox='0 0 24 24' fill='none' stroke='#fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-share-2'><circle cx='18' cy='5' r='3'></circle><circle cx='6' cy='12' r='3'></circle><circle cx='18' cy='19' r='3'></circle><line x1='8.59' y1='13.51' x2='15.42' y2='17.49'></line><line x1='15.41' y1='6.51' x2='8.59' y2='10.49'></line></svg>")+"')",k="url('data:image/svg+xml;base64,"+l("<svg xmlns='http://www.w3.org/2000/svg'   viewBox='0 0 24 24' fill='none' stroke='#fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-x'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg>")+"')",c="url('data:image/svg+xml;base64,"+l("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='#fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-minimize'><path d='M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3'></path></svg>")+"')",d="url('data:image/svg+xml;base64,"+l("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='#fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-maximize'><path d='M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3'></path></svg>")+"')",Z="url('data:image/svg+xml;base64,"+l("<svg id='No_Image' data-name='No_Image' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 240 240'>\n<rect x='50' y='70' width='140' height='140' rx='20' ry='20' fill='#3700B3' mask='url(#hole)'/>\n<mask id='hole'>\n    <rect x='50' y='70' width='140' height='140'  rx='20' ry='20' fill='#b49393'/>\n    <path d='M70 190,H170,L135 100,L110 150,L92.5 130 z' stroke='red' fill='#3700B3'></path>\n</mask>\n</svg>\n")+"')",m=class{constructor(e){(0,i.r)(this,e),this.onPhotoButtonsClose=(0,i.c)(this,"jeepPhotoButtonsClose",7),this.onPhotoRequestFullscreen=(0,i.c)(this,"jeepPhotoRequestFullscreen",7),this.onPhotoRequestMinimize=(0,i.c)(this,"jeepPhotoRequestMinimize",7),this.onPhotoButtonsShare=(0,i.c)(this,"jeepPhotoButtonsShare",7),this.share=void 0,this.viewmode=void 0,this.closebutton=void 0,this.fromcomponent=void 0,this.innerShare=void 0,this.innerViewmode=void 0,this.innerCloseButton=void 0,this.innerFromComponent=void 0,this.visible=void 0,this.mode=void 0}parseShare(e){this.innerShare=e}parseViewmode(e){this.innerViewmode=e}parseCloseButton(e){this.innerCloseButton=e}parseFromComponent(e){this.innerFromComponent=e}init(){var e=this;return(0,o.Z)(function*(){return yield e._init()})()}setPhotoButtons(){return Promise.resolve(this._setPhotoButtons())}setJeepPhotoButtonsVisibility(e){e?(this._photoButtonsEl.classList.remove("hidden"),this.visible=!0):(this._photoButtonsEl.classList.add("hidden"),this.visible=!1)}componentWillLoad(){var e=this;return(0,o.Z)(function*(){e._window=window,yield e.init()})()}componentDidLoad(){var e=this;return(0,o.Z)(function*(){yield e.setPhotoButtons()})()}_init(){var e=this;return(0,o.Z)(function*(){e._element=e.el.shadowRoot,e.parseShare(e.share?e.share:"visible"),e.parseViewmode(e.viewmode?e.viewmode:"normal"),e.parseCloseButton(e.closebutton?e.closebutton:"yes"),e.parseFromComponent(e.fromcomponent?e.fromcomponent:"jeep-photoviewer"),"fullscreen"===e.innerViewmode?(e.mode="minimize",e._modeUrl=c):(e.mode="fullscreen",e._modeUrl=d)})()}_setPhotoButtons(){var e=this;return(0,o.Z)(function*(){e._photoButtonsEl=e._element.querySelector(".photobuttons-container"),"visible"===e.innerShare&&"jeep-photo-hscroll"===e.innerFromComponent&&(e._shareEl=e._photoButtonsEl.querySelector(".share-button"),e._shareEl.style.setProperty("background-image",`${S}`)),"jeep-photo-hscroll"===e.innerFromComponent&&(e._modeEl=e._photoButtonsEl.querySelector(".mode-button"),e._modeEl.style.setProperty("background-image",`${e._modeUrl}`)),"yes"===e.innerCloseButton&&(e._closeEl=e._photoButtonsEl.querySelector(".close-button"),e._closeEl.style.setProperty("background-image",`${k}`))})()}_handleClick(e){switch(e){case"share":this.onPhotoButtonsShare.emit();break;case"close":this.onPhotoButtonsClose.emit({component:this.innerFromComponent});break;case"mode":"fullscreen"===this.mode?(this._modeUrl=c,this._modeEl.style.setProperty("background-image",`${this._modeUrl}`),this.onPhotoRequestFullscreen.emit(),this.mode="minimize"):(this._modeUrl=d,this._modeEl.style.setProperty("background-image",`${this._modeUrl}`),this.onPhotoRequestMinimize.emit(),this.mode="fullscreen")}}render(){let e=[];return"visible"===this.innerShare&&"jeep-photo-hscroll"===this.innerFromComponent&&(e=[...e,(0,i.h)("div",{class:"share-button",onClick:()=>this._handleClick("share")})]),"jeep-photo-hscroll"===this.innerFromComponent&&(e=[...e,(0,i.h)("div",{class:"mode-button",onClick:()=>this._handleClick("mode")})]),"yes"===this.innerCloseButton&&(e=[...e,(0,i.h)("div",{class:"close-button",onClick:()=>this._handleClick("close")})]),(0,i.h)(i.H,null,(0,i.h)("div",{class:"photobuttons-container"},(0,i.h)("div",{class:"wrapper"},e)))}get el(){return(0,i.g)(this)}static get watchers(){return{share:["parseShare"],viewmode:["parseViewmode"],closebutton:["parseCloseButton"],fromcomponent:["parseFromComponent"]}}};m.style=":host{display:block;--photo-buttons-height:min(7vmin, 40px);--photo-buttons-padding:3px}.photobuttons-container{position:absolute;top:5vh;left:0;width:100vw;height:var(--photo-buttons-height);background-color:rgba(125,125,125,0.3);visibility:visible}.wrapper{width:100%;height:100%}.share-button{position:absolute;top:0;left:7vmin;width:var(--photo-buttons-height);height:var(--photo-buttons-height);background-position:center;background-repeat:no-repeat;background-size:cover}.mode-button{position:absolute;top:0;left:calc(100vw / 2 - var(--photo-buttons-height) / 2);width:var(--photo-buttons-height);height:var(--photo-buttons-height);background-position:center;background-repeat:no-repeat;background-size:cover}.close-button{position:absolute;top:0;left:calc(100vw - var(--photo-buttons-height) - 7vmin);width:var(--photo-buttons-height);height:var(--photo-buttons-height);background-position:center;background-repeat:no-repeat;background-size:cover}.hidden{visibility:hidden}";const p=class{constructor(e){(0,i.r)(this,e),this.onPhotoHscrollResult=(0,i.c)(this,"jeepPhotoHscrollResult",7),this.onPhotoZoom=(0,i.c)(this,"jeepPhotoZoom",7),this.onPhotoPhotoHscrollClose=(0,i.c)(this,"jeepPhotoHscrollClose",7),this._tapped=!1,this._tappedTime=null,this._tapNum=0,this._timerStart=!1,this._photoZoomOneTap=!1,this._ticking=!1,this._isScrollListener=!1,this._shareUrl="",this._shareTitle="",this._shareText="",this.position=void 0,this.imageList=void 0,this.options=void 0,this.mode=void 0,this.innerImageList=void 0,this.innerOptions=void 0,this.innerPosition=void 0,this.innerMode=void 0,this.buttonsVisibility=void 0,this.isFullscreen=void 0,this.photoZoom=void 0,this.share=void 0,this.shareShow=!1,this.titleShow=!0,this.maxZoomScale=void 0,this.currentIndex=void 0}parsePosition(e){this.innerPosition=e}parseImageList(e){this.innerImageList=e}parseOptions(e){this.innerOptions=e}parseMode(e){this.innerMode=e}handleWindowResize(){var e=this;return(0,o.Z)(function*(){e._currentPosition=e.currentIndex*e._window.innerWidth,yield e._scrollToPosition(e.currentIndex)})()}handleJeepPhotoButtonsClose(){var e=this;return(0,o.Z)(function*(){e.isFullscreen&&(yield e._fullscreenExit()),"gallery"!==e.innerMode&&(e.currentIndex="slider"===e.innerMode?e._getCurrentPhotoIndex():e.innerPosition,e.onPhotoHscrollResult.emit({result:!0,imageIndex:e.currentIndex}))})()}handleJeepPhotoButtonsShare(){var e=this;return(0,o.Z)(function*(){e.shareShow=!0,e._shareUrl=e.innerImageList[e.currentIndex].url,e._shareTitle=e.innerImageList[e.currentIndex].title,e._shareText="Share API Demo"})()}handleJeepPhotoShareCompleted(e){var t=this;return(0,o.Z)(function*(){t.onPhotoHscrollResult.emit(e.detail?e.detail.result?{result:!0,message:"Photo has been shared successfully"}:{result:!1,message:`Error: ${e.detail.message}`}:{result:!1,message:"Error: No message returned"}),t.shareShow=!1})()}handleJeepPhotoFullscreenRequest(){var e=this;return(0,o.Z)(function*(){yield e._fullscreenRequest(document.documentElement)})()}handleJeepPhotoMinimizeRequest(){var e=this;return(0,o.Z)(function*(){const t=e._getCurrentPhotoIndex();yield e._fullscreenExit(),e.currentIndex=t})()}handleJeepPhotoZoomOneTap(){var e=this;return(0,o.Z)(function*(){e.photoZoom=!1,e.onPhotoZoom.emit({isZoom:e.photoZoom}),e._photoZoomOneTap=!0,e.buttonsVisibility=!e.buttonsVisibility})()}handleJeepPhotoSwipe(e){var t=this;return(0,o.Z)(function*(){if(e.detail&&!t.photoZoom){let s=e.detail;(s.up||s.down)&&(t.isFullscreen&&(yield t._fullscreenExit()),"gallery"!==t.innerMode?(t.currentIndex="slider"===t.innerMode?t._getCurrentPhotoIndex():t.innerPosition,t.onPhotoHscrollResult.emit({result:!0,imageIndex:t.currentIndex})):t.onPhotoPhotoHscrollClose.emit())}})()}init(){var e=this;return(0,o.Z)(function*(){return yield e._init()})()}setCarousel(){return Promise.resolve(this._setCarousel())}componentWillLoad(){var e=this;return(0,o.Z)(function*(){e._window=window,yield e.init()})()}componentDidLoad(){var e=this;return(0,o.Z)(function*(){yield e.setCarousel()})()}componentDidRender(){var e=this;return(0,o.Z)(function*(){e._photoZoomOneTap&&(yield e.setCarousel(),e._photoZoomOneTap=!1)})()}_init(){var e=this;return(0,o.Z)(function*(){e._element=e.el.shadowRoot,e.parseImageList(e.imageList?e.imageList:null),e.parseOptions(e.options?e.options:null),e.parseMode(e.mode?e.mode:"one"),e.parsePosition(e.position>=0?e.position:0),e.buttonsVisibility=!0,e.isFullscreen=!1,e.photoZoom=!1,e.onPhotoZoom.emit({isZoom:e.photoZoom}),e.share="visible",e.share=null!=e.innerOptions&&Object.keys(e.innerOptions).includes("share")?e.innerOptions.share?"visible":"hidden":"visible",e.titleShow=null==e.innerOptions||!Object.keys(e.innerOptions).includes("title")||e.innerOptions.title,e.maxZoomScale=null!=e.innerOptions&&e.innerOptions.maxzoomscale?e.innerOptions.maxzoomscale:3,e.currentIndex=e.innerPosition,e._widthFullscreen=e._window.innerWidth})()}_setCarousel(){var e=this;return(0,o.Z)(function*(){e._carouselEl=e._element.querySelector(".carousel"),yield e._scrollToPosition(e.currentIndex),e._currentPosition=e.currentIndex*e._window.innerWidth,e._previousScrollWidth=e._carouselEl.scrollWidth,e._carouselEl.classList.remove("hidden"),e._isScrollListener||(e._isScrollListener=!0,e._carouselEl.addEventListener("scroll",()=>{e._ticking||(setTimeout((0,o.Z)(function*(){if(e._carouselEl.scrollWidth===e._previousScrollWidth){const t=e._getCurrentPhotoIndex();t!==e.currentIndex&&(e.currentIndex=t)}e._ticking=!1}),500),e._ticking=!0)},!1))})()}_scrollToPosition(e){var t=this;return(0,o.Z)(function*(){t._currentPosition=e*t._window.innerWidth,t._carouselEl&&t._carouselEl.scrollTo(t._currentPosition,0)})()}_getCurrentPhotoIndex(){let e=0;return this._currentPosition=Number(this._carouselEl.scrollLeft),Math.abs(this._carouselEl.scrollWidth/this.innerImageList.length-this._window.innerWidth)<=2&&(e=Math.round(this._currentPosition/this._window.innerWidth)),e}_fullscreenRequest(e){var t=this;return(0,o.Z)(function*(){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():t.onPhotoHscrollResult.emit({result:!1,message:"Error: Fullscreen API is not supported."}),t.isFullscreen=!0})()}_fullscreenExit(){var e=this;return(0,o.Z)(function*(){let t=document;t&&t.exitFullscreen?t.exitFullscreen():t&&t.webkitExitFullscreen?t.webkitExitFullscreen():t&&t.mozExitFullscreen?t.mozExitFullscreen():t&&t.msExitFullscreen?t.msExitFullscreen():e.onPhotoHscrollResult.emit({result:!1,message:"Error: Fullscreen API is not supported."}),e.isFullscreen=!1})()}_handleClick(){"gallery"===this.innerMode||"slider"===this.innerMode?(this.currentIndex=this._getCurrentPhotoIndex(),this._currentPosition=this.currentIndex*this._window.innerWidth):this.currentIndex=this.innerPosition,this.buttonsVisibility=!this.buttonsVisibility,this.photoZoom=!0,this.onPhotoZoom.emit({isZoom:this.photoZoom})}render(){let e=[];if(null!=this.innerImageList&&this.innerImageList.length>0){const n=this.titleShow?"carousel-title":"carousel-title hidden";if("gallery"===this.innerMode||"slider"===this.innerMode)for(var t=0;t<this.innerImageList.length;t++)e=[...e,(0,i.h)("div",{class:"carousel-item",onClick:()=>this._handleClick()},(0,i.h)("img",{src:this.innerImageList[t].url,alt:this.innerImageList[t].title,class:"carousel-image"}),(0,i.h)("p",{class:n},this.innerImageList[t].title))];"one"===this.innerMode&&(e=[...e,(0,i.h)("div",{class:"carousel-item",onClick:()=>this._handleClick()},(0,i.h)("img",{src:this.innerImageList[this.innerPosition].url,alt:this.innerImageList[this.innerPosition].title,class:"carousel-image"}),(0,i.h)("p",{class:n},this.innerImageList[this.innerPosition].title))])}let s=[];if(this.buttonsVisibility){const n=this.isFullscreen?"fullscreen":"normal";s=[...s,(0,i.h)("jeep-photo-buttons",{share:this.share,viewmode:n,closebutton:"yes",fromcomponent:"jeep-photo-hscroll"})]}let r=[];return this.shareShow&&(r=[...r,(0,i.h)("jeep-photo-share",{surl:this._shareUrl,stitle:this._shareTitle,stext:this._shareText})]),(0,i.h)(i.H,null,(0,i.h)("div",{class:"hscroll-container"},(0,i.h)("div",{class:"wrapper"},this.photoZoom?(0,i.h)("jeep-photo-zoom",{url:this.innerImageList[this.currentIndex].url,maxzoomscale:this.maxZoomScale}):(0,i.h)("div",null,(0,i.h)("jeep-photo-swipe",null,(0,i.h)("div",{class:"carousel hidden"},e)),s,r))))}get el(){return(0,i.g)(this)}static get watchers(){return{position:["parsePosition"],imageList:["parseImageList"],options:["parseOptions"],mode:["parseMode"]}}};p.style=":host{display:block;--hscroll-background-color:var(--photoviewer-background-color);--hscroll-title-color:#d3d3d3}.hscroll-container{position:absolute;top:0;bottom:0;right:0;left:0;overflow-y:hidden;background-color:var(--hscroll-background-color)}.wrapper{box-sizing:border-box;padding:0;margin:0;position:relative;width:100%;height:100%}.carousel{box-sizing:border-box;margin:0;padding:0;width:100vw;height:100vh;scroll-snap-type:x mandatory;display:flex;-ms-scroll-snap-type:x mandatory;-webkit-scroll-snap-type:x mandatory;-webkit-scroll-snap-destination:0% 0%;-webkit-overflow-scrolling:touch;overflow-x:scroll;-ms-overflow-style:none;visibility:visible}.carousel::-webkit-scrollbar{display:none}.carousel-item{border-right:1px solid white;padding:0;min-width:100vw;min-height:100vh;scroll-snap-align:start;text-align:center;position:relative}.carousel-image{width:100vw;height:100vh;object-fit:contain}.carousel-title{position:absolute;bottom:0;visibility:visible;width:100vw;height:3vh;color:var(--hscroll-title-color);font:2.5vh Arial, sans-serif}.hidden{visibility:hidden}";const _=class{constructor(e){(0,i.r)(this,e),this.onPhotoShareCompleted=(0,i.c)(this,"jeepPhotoShareCompleted",7),this.surl=null,this.stitle=null,this.stext=null,this.innerUrl=void 0,this.innerTitle=void 0,this.innerText=void 0}parseUrl(e){this.innerUrl=e}parseTitle(e){this.innerTitle=e}parseText(e){this.innerText=e}init(){var e=this;return(0,o.Z)(function*(){return yield e._init()})()}setShare(){return Promise.resolve(this._setShare())}componentWillLoad(){var e=this;return(0,o.Z)(function*(){e._window=window,yield e.init()})()}componentDidLoad(){var e=this;return(0,o.Z)(function*(){yield e.setShare()})()}_init(){var e=this;return(0,o.Z)(function*(){e._element=e.el.shadowRoot,e.parseUrl(e.surl?e.surl:null),e.parseTitle(e.stitle?e.stitle:null),e.parseText(e.stext?e.stext:null)})()}_setShare(){var e=this;return(0,o.Z)(function*(){navigator.share?navigator.share({title:e.innerTitle,url:e.innerUrl,text:e.innerText}).then(()=>{e.onPhotoShareCompleted.emit({result:!0})}).catch(t=>{e.onPhotoShareCompleted.emit({result:!1,message:t})}):e.onPhotoShareCompleted.emit({result:!1,message:"Share not implemented on this browser"})})()}render(){return(0,i.h)(i.H,null)}get el(){return(0,i.g)(this)}static get watchers(){return{surl:["parseUrl"],stitle:["parseTitle"],stext:["parseText"]}}};_.style=":host{display:block;--share-background-color:#000;--share-width:100vw;--share-height:100vh;--share-top:0px;--share-left:0px}.share-container{position:absolute;top:0;bottom:0;right:0;left:0;background-color:var(--zoom-background-color)}.wrapper{padding:0;margin:0;position:relative;width:100%;height:100%}";const g=class{constructor(e){(0,i.r)(this,e),this.onPhotoSwipe=(0,i.c)(this,"jeepPhotoSwipe",7),this._startPoint={},this._endPoint={},this._totalTime=0,this._getSwipeDirection=(t,s,r,n)=>{var h={up:!1,right:!1,down:!1,left:!1};return t.x>s.x&&t.x-s.x>=r?h.left=!0:t.x<s.x&&s.x-t.x>=r&&(h.right=!0),t.y<s.y&&s.y-t.y>=n?h.down=!0:t.y>s.y&&t.y-s.y>=n&&(h.up=!0),h},this.timeThreshold=200,this.thresholdX=100,this.thresholdY=100,this.innerTimeThreshold=void 0,this.innerThresholdX=void 0,this.innerThresholdY=void 0}parseTimeThreshold(e){this.innerTimeThreshold=e}parseThresholdX(e){this.innerThresholdX=e}parseThresholdY(e){this.innerThresholdY=e}init(){var e=this;return(0,o.Z)(function*(){return yield e._init()})()}handleTouchStart(e){var t=this;return(0,o.Z)(function*(){t._startPoint.x=e.touches[0].clientX,t._startPoint.y=e.touches[0].clientY,t._time=setInterval(()=>{t._totalTime+=10},10)})()}handleTouchEnd(e){var t=this;return(0,o.Z)(function*(){if(t._endPoint.x=e.changedTouches[0].clientX,t._endPoint.y=e.changedTouches[0].clientY,clearInterval(t._time),t._totalTime>=t.innerTimeThreshold){let s=t._getSwipeDirection(t._startPoint,t._endPoint,t.innerThresholdX,t.innerThresholdY);t.onPhotoSwipe.emit({up:s.up,down:s.down,left:s.left,right:s.right})}t._totalTime=0})()}handleMouseDown(e){var t=this;return(0,o.Z)(function*(){e.preventDefault(),t._startPoint.x=e.clientX,t._startPoint.y=e.clientY,t._time=setInterval(()=>{t._totalTime+=10},10)})()}handleMouseUp(e){var t=this;return(0,o.Z)(function*(){if(t._endPoint.x=e.clientX,t._endPoint.y=e.clientY,clearInterval(t._time),t._totalTime>=t.innerTimeThreshold){let s=t._getSwipeDirection(t._startPoint,t._endPoint,t.innerThresholdX,t.innerThresholdY);t.onPhotoSwipe.emit({up:s.up,down:s.down,left:s.left,right:s.right})}t._totalTime=0})()}componentWillLoad(){var e=this;return(0,o.Z)(function*(){e._window=window,yield e.init()})()}_init(){var e=this;return(0,o.Z)(function*(){e._element=e.el.shadowRoot,e.parseTimeThreshold(e.timeThreshold?e.timeThreshold:200),e.parseThresholdX(e.thresholdX?e.thresholdX:100),e.parseThresholdY(e.thresholdY?e.thresholdY:100)})()}render(){return(0,i.h)(i.H,null,(0,i.h)("div",{class:"swipe-container",onTouchStart:e=>this.handleTouchStart(e),onTouchEnd:e=>this.handleTouchEnd(e),onMouseDown:e=>this.handleMouseDown(e),onMouseUp:e=>this.handleMouseUp(e)},(0,i.h)("slot",null)))}get el(){return(0,i.g)(this)}static get watchers(){return{timeThreshold:["parseTimeThreshold"],thresholdX:["parseThresholdX"],thresholdY:["parseThresholdY"]}}};g.style="";const f=class{constructor(e){(0,i.r)(this,e),this.onPhotoZoomOneTap=(0,i.c)(this,"jeepPhotoZoomOneTap",7),this._tapedTwice=!1,this._tapedTime=null,this._tapNum=0,this._timerStart=!1,this._imageNatural={},this._view={},this._imageInView={},this._curPan={},this._startPoint={},this._movePoint={},this._centerPoint={},this._lastPoint={},this._doubleTouch=!1,this._touchStart=!1,this._touchMove=!1,this.url=void 0,this.maxzoomscale=3,this.innerUrl=void 0,this.innerMaxZoomScale=void 0}parseUrl(e){this.innerUrl=e}parseMaxZooScale(e){this.innerMaxZoomScale=e}init(){var e=this;return(0,o.Z)(function*(){return yield e._init()})()}setPhoto(){return Promise.resolve(this._setPhoto())}componentWillLoad(){var e=this;return(0,o.Z)(function*(){e._window=window,yield e.init()})()}componentDidLoad(){var e=this;return(0,o.Z)(function*(){yield e.setPhoto()})()}_init(){var e=this;return(0,o.Z)(function*(){e._element=e.el.shadowRoot,e.parseUrl(e.url?e.url:null),e.parseMaxZooScale(e.maxzoomscale?e.maxzoomscale:3),e._curZoomScale=1,e._curPan={x:0,y:0},e._lastPoint={x:e._window.innerWidth/2,y:e._window.innerHeight/2}})()}_setPhoto(){var e=this;return(0,o.Z)(function*(){e._photoEl=e._element.querySelector(".zoom-item"),e._photoEl.addEventListener("touchstart",e._startHandler.bind(e)),e._photoEl.addEventListener("touchmove",e._moveHandler.bind(e)),e._photoEl.addEventListener("touchend",e._endHandler.bind(e)),e._photoEl.addEventListener("mousedown",e._startHandler.bind(e)),e._photoEl.addEventListener("mousemove",e._moveHandler.bind(e)),e._photoEl.addEventListener("mouseup",e._endHandler.bind(e)),yield e.setImage(),e._imageEl=e._photoEl.querySelector(".zoom-image"),e._view={left:0,top:0,width:e._window.innerWidth,height:e._window.innerHeight},e._imageNatural={left:0,top:0,width:e._imageEl.naturalWidth,height:e._imageEl.naturalHeight},e._imageInView=e._calculateImageInView(),e._maxZoomScale=e._calculateMaxZooScale(),e._setHostProperties(e._curZoomScale,e._curPan),e._lastPoint.x=e._imageInView.width/2,e._lastPoint.y=e._imageInView.height/2})()}setImage(){var e=this;return(0,o.Z)(function*(){return new Promise(t=>{var s=new Image;s.onload=()=>{e._photoEl.append(s),t()},s.src=e.innerUrl,s.className="zoom-image"})})()}_setHostProperties(e,t){const s=`scale(${e}) translateX(${t.x}px) translateY(${t.y}px)`;this.el.style.setProperty("--zoom-left",`${this._imageInView.left}px`),this.el.style.setProperty("--zoom-top",`${this._imageInView.top}px`),this.el.style.setProperty("--zoom-width",`${this._imageInView.width}px`),this.el.style.setProperty("--zoom-height",`${this._imageInView.height}px`),this.el.style.setProperty("--zoom-transform",`${s}`)}_calculateImageInView(){let e={};const t=Math.max(this._imageNatural.width/this._view.width,this._imageNatural.height/this._view.height);return e.width=this._imageNatural.width/t,e.height=this._imageNatural.height/t,e.left=Math.max(0,(this._view.width-e.width)/2),e.top=Math.max(0,(this._view.height-e.height)/2),e}_calculateMaxZooScale(){return Math.max(this.innerMaxZoomScale,Math.max(this._view.width/this._imageInView.width,this._view.height/this._imageInView.height))}_getTouchPoint(e){let t={};return e.targetTouches?(t.x=e.targetTouches[0].clientX,t.y=e.targetTouches[0].clientY):(t.x=e.clientX,t.y=e.clientY),t}_startHandler(e){if(e.preventDefault(),this._startPoint=this._getTouchPoint(e),!this._tapedTwice)return this._tapedTwice=!0,this._tapedTime=setTimeout(()=>{this._touchStart=!0,this._tapNum=1,this._endHandler()},300),!1;this._tapNum=2,this._lastPoint={x:this._startPoint.x,y:this._startPoint.y},clearTimeout(this._tapedTime),this._touchStart=!0}_moveHandler(e){if(this._tapedTwice){this._movePoint=this._getTouchPoint(e),this._touchMove=!0;const t={x:this._lastPoint.x-this._movePoint.x,y:this._lastPoint.y-this._movePoint.y};this._curPan.x+=t.x*(this._maxZoomScale-1)/this._maxZoomScale,this._curPan.y+=t.y*(this._maxZoomScale-1)/this._maxZoomScale,this._lastPoint=this._movePoint,this._setHostProperties(this._maxZoomScale,this._curPan),this._touchStart=!1}}_endHandler(){this._touchStart&&this._tapNum>0&&(2===this._tapNum?this._touchMove?(this._tapNum=0,this._tapedTwice=!1,this._touchStart=!1,this._touchMove=!1,this._curZoomScale=1,this._curPan={x:0,y:0},this._setHostProperties(this._curZoomScale,this._curPan)):this._handleDoubleTap(this._startPoint):1===this._tapNum&&(this._curZoomScale=1,this._handleSingleTap(),this._tapNum=0,this._tapedTwice=!1,this._touchStart=!1))}_handleSingleTap(){this.onPhotoZoomOneTap.emit()}_handleDoubleTap(e){1===this._curZoomScale?(this._curZoomScale=this._maxZoomScale,this._curPan.x=(this._view.width/2-e.x)*(this._curZoomScale-1)/this._curZoomScale,this._curPan.y=(this._view.height/2-e.y)*(this._curZoomScale-1)/this._curZoomScale,this._setHostProperties(this._curZoomScale,this._curPan)):(this._curZoomScale=1,this._curPan={x:0,y:0},this._setHostProperties(this._curZoomScale,this._curPan))}render(){return(0,i.h)(i.H,null,(0,i.h)("div",{class:"zoom-container"},(0,i.h)("div",{class:"wrapper"},(0,i.h)("div",{class:"zoom-item"}))))}get el(){return(0,i.g)(this)}static get watchers(){return{url:["parseUrl"],maxzoomscale:["parseMaxZooScale"]}}};f.style=":host{display:block;--zoom-background-color:var(--photoviewer-background-color);--zoom-width:100vw;--zoom-height:100vh;--zoom-offset-x:0px;--zoom-offset-y:0px;--zoom-top:0px;--zoom-left:0px;--zoom-transform:scale(1) translateX(0px) translateY(0px)}.zoom-container{position:absolute;top:0;bottom:0;right:0;left:0;background-color:var(--zoom-background-color)}.wrapper{padding:0;margin:0;position:relative;width:100%;height:100%}.zoom-item{margin:0;padding:0;width:100vw;height:100vh;position:relative}.zoom-image{position:absolute;offset:var(--zoom-offset-x) var(--zoom-offset-y);top:var(--zoom-top);left:var(--zoom-left);width:var(--zoom-width);height:var(--zoom-height);transform:var(--zoom-transform)}";const w=class{constructor(e){(0,i.r)(this,e),this.onPhotoViewerResult=(0,i.c)(this,"jeepPhotoViewerResult",7),this._isScale=!1,this._backRange=["white","ivory","lightgrey","darkgrey","dimgrey","grey","black"],this.imageList=void 0,this.options=void 0,this.mode=void 0,this.startFrom=void 0,this.innerImageList=void 0,this.innerOptions=void 0,this.innerMode=void 0,this.innerStartFrom=void 0,this.showHScroll=!1,this.close=!1}parseImageList(e){this.innerImageList=e}parseOptions(e){this.innerOptions=e}parseMode(e){const s=["one","gallery","slider"].includes(e)?e:"one";this.innerMode=s}parseStartFrom(e){this.innerStartFrom=e<0||e>this.innerImageList.length?0:e}handleWindowResize(){this._windowResize()}handleJeepPhotoHscrollClose(){var e=this;return(0,o.Z)(function*(){"gallery"===e.innerMode&&(e.close=!1,yield e.closePhotoHScroll())})()}handleJeepPhotoButtonsClose(e){var t=this;return(0,o.Z)(function*(){"gallery"===t.innerMode&&("jeep-photo-hscroll"===e.detail.component?(t.close=!1,yield t.closePhotoHScroll()):(t.close=!0,t.onPhotoViewerResult.emit({result:!0}))),("one"===t.innerMode||"slider"===t.innerMode)&&(t.close=!0)})()}handleJeepPhotoHscrollResult(e){e.detail&&this.onPhotoViewerResult.emit(e.detail)}init(){var e=this;return(0,o.Z)(function*(){return yield e._init()})()}closePhotoHScroll(){return Promise.resolve(this._closeHScroll())}componentWillLoad(){var e=this;return(0,o.Z)(function*(){e._window=window,yield e.init()})()}_init(){var e=this;return(0,o.Z)(function*(){e._element=e.el.shadowRoot,e.parseImageList(e.imageList?e.imageList:null),e.parseOptions(e.options?e.options:null),e.parseMode(e.mode?e.mode:"one");let t=0;null!=e.startFrom&&(t=e.startFrom>e.imageList.length-1?e.imageList.length-1:e.startFrom),e.parseStartFrom(t),e._setProperties()})()}_windowResize(){var e=this;return(0,o.Z)(function*(){e._setProperties()})()}_setProperties(){if((null==this.innerImageList||0==this.innerImageList.length)&&this.onPhotoViewerResult.emit({result:!1,message:"You must provide an image or an image array"}),("gallery"===this.innerMode||"slider"===this.innerMode)&&this.innerImageList.length<=1&&this.onPhotoViewerResult.emit({result:!1,message:`Image array should be greater than one for mode : ${this.innerMode}`}),"gallery"===this.innerMode){var e=null!=this.options&&this.options.spancount?this.options.spancount:3;this._window.innerWidth>this._window.innerHeight&&(e+=1)}else"slider"===this.innerMode?(e=1,this._selPos=this.innerStartFrom,this.showHScroll=!0):"one"===this.innerMode?(e=1,this._selPos=this.innerImageList.length>1?this.innerStartFrom:0,this.showHScroll=!0):this.onPhotoViewerResult.emit({result:!1,message:"mode must be in ['one', 'gallery', 'slider']"});const t=(100/e).toFixed(4);var s="";for(let n=0;n<e;n++)s+="auto ";s=s.substring(0,s.length-1);var r=null!=this.options&&this._backRange.includes(this.options.backgroundcolor)?this.options.backgroundcolor:"black";this.el.style.setProperty("--gallery-box-width",`${t}vw`),this.el.style.setProperty("--gallery-template-columns",`${s}`),this.el.style.setProperty("--photoviewer-background-color",`${r}`)}_handleClick(e){this._selPos=Number(e.substr(e.lastIndexOf("-")+1)),this.showHScroll=!0}_closeHScroll(){var e=this;return(0,o.Z)(function*(){e.showHScroll=!1})()}render(){let e=[];if(null!=this.innerImageList&&this.innerImageList.length>0)for(var t=0;t<this.innerImageList.length;t++){const s={"background-image":`${Z}`},r={"background-image":`url(${this.innerImageList[t].url})`},n=`gallery-box-${t}`;e="gallery"===this.innerMode?[...e,(0,i.h)("div",{class:"placeholder",style:s},(0,i.h)("div",{id:n,class:"image",onClick:()=>this._handleClick(n),style:r},(0,i.h)("img",null)))]:[...e,(0,i.h)("div",{class:"placeholder",style:s},(0,i.h)("div",{id:n,class:"image",style:r},(0,i.h)("img",null)))]}return(0,i.h)(i.H,null,this.close?null:(0,i.h)("div",{class:"photoviewer-container"},this.showHScroll?(0,i.h)("jeep-photo-hscroll",{position:this._selPos,imageList:this.innerImageList,options:this.innerOptions,mode:this.innerMode}):(0,i.h)("div",{class:"wrapper"},e,(0,i.h)("jeep-photo-buttons",{share:"false",viewmode:"normal",closebutton:"yes",fromcomponent:"jeep-photoviewer"}))))}static get assetsDirs(){return["assets"]}get el(){return(0,i.g)(this)}static get watchers(){return{imageList:["parseImageList"],options:["parseOptions"],mode:["parseMode"],startFrom:["parseStartFrom"]}}};w.style=":host{display:block;--gallery-box-width:33.33vw;--gallery-template-columns:auto auto auto;--photoviewer-background-color:black}.photoviewer-container::-webkit-scrollbar{display:none}.photoviewer-container{-ms-autohiding-scrollbar:none;scrollbar-width:0}.wrapper{position:absolute;top:0;left:0;display:grid;width:100vw;grid-template-columns:var(--gallery-template-columns);grid-row-gap:2px;column-gap:2px;background-color:var(--photoviewer-background-color)}.placeholder{width:var(--gallery-box-width);height:var(--gallery-box-width);line-height:var(--gallery-box-width);text-align:center;background-position:center;background-repeat:no-repeat;background-size:cover;background-color:#bdbbbb}.image{width:100%;background-position:center;background-repeat:no-repeat;background-size:cover;background-color:#fffff0}"}}]);