"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3153],{3153:(x,d,o)=>{o.r(d),o.d(d,{MarginPageModule:()=>S});var h=o(6895),s=o(4719),i=o(2478),p=o(1065),v=o(5861),t=o(7631),c=o(1737),u=o(4850),l=o(7221),M=o(1102);let y=(()=>{class n{constructor(r){this.rest=r}getMargin(){return this.rest.get("/margins").pipe((0,u.U)(r=>{const{data:e}=r.body;return e}),(0,l.K)(r=>(0,c._)(r))).toPromise()}createMargin(r){return this.rest.post("/margins",{margin:r}).pipe((0,u.U)(e=>{const{data:a}=e.body;return a}),(0,l.K)(e=>(0,c._)(e))).toPromise()}updateMargin(r){return this.rest.put("/margins",{margin:r}).pipe((0,u.U)(e=>{const{data:a}=e.body;return a}),(0,l.K)(e=>(0,c._)(e))).toPromise()}}return n.\u0275fac=function(r){return new(r||n)(t.LFG(M.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=o(5904);const U=[{path:"",component:(()=>{class n{constructor(r,e,a,m,f){this.formBuilder=r,this.marginService=e,this.loadingCtrl=a,this.accountService=m,this.toastController=f}ngOnInit(){var r=this;return(0,v.Z)(function*(){r.marginForm=r.formBuilder.group({margin:["",[]]});const e=yield r.loadingCtrl.create({message:"Loading ..."});e.present(),r.currentUser=yield r.accountService.user(String(r.accountService.currentUser.id)),r.margin=r.currentUser.margin||0,r.marginForm.setValue({margin:r.margin}),e.dismiss()})()}save(){var r=this;return(0,v.Z)(function*(){if(r.marginForm.valid){const{margin:e}=r.marginForm.value,a=yield r.loadingCtrl.create({message:"Saving ..."}),m=yield r.toastController.create({message:"Successfully updated margin.",duration:2e3,color:"success"});a.present(),(yield r.accountService.updateMargin({id:r.currentUser.id,margin:e}))&&(r.accountService.user(String(r.currentUser.id)),m.present()),a.dismiss()}})()}}return n.\u0275fac=function(r){return new(r||n)(t.Y36(s.qu),t.Y36(y),t.Y36(i.HT),t.Y36(Z.B),t.Y36(i.yF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-margin"]],decls:32,vars:2,consts:[["mode","ios"],["slot","start"],["mode","md"],[1,"container"],[1,"ion-padding"],[1,"title"],[1,"paragraph-text-18"],[1,"paragraph-text-12","opacity-50"],[3,"formGroup"],[1,"ion-align-items-center","lot-range"],["mode","ios","formControlName","margin","min","0","max","100","step",".5"],["slot","start",1,"white-500"],["slot","end",1,"white-500"],[1,"ion-padding-bottom","ion-margin-bottom","ion-text-center"],[1,"paragraph-text-18","opacity-50"],["expand","block","color","dark",1,"ion-margin",3,"click"]],template:function(r,e){1&r&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Margin"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",3)(8,"div",4)(9,"ion-text",5),t._uU(10,"Adjust Your Margin"),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"ion-text",6),t._uU(13,"Use the slider below to set your profit margin."),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"ion-text",7),t._uU(16,"A 10% margin displays the value 10% lower than the original price."),t.qZA()(),t.TgZ(17,"form",8)(18,"div",9)(19,"ion-range",10)(20,"ion-text",11),t._uU(21,"0"),t.qZA(),t.TgZ(22,"ion-text",12),t._uU(23,"100"),t.qZA()()(),t.TgZ(24,"div",13)(25,"ion-text",5),t._uU(26),t.qZA(),t._UZ(27,"br"),t.TgZ(28,"ion-text",14),t._uU(29,"Margin Percentage"),t.qZA()(),t.TgZ(30,"ion-button",15),t.NdJ("click",function(){return e.save()}),t._uU(31,"Save"),t.qZA()()()()),2&r&&(t.xp6(17),t.Q6J("formGroup",e.marginForm),t.xp6(9),t.hij("",e.marginForm.value.margin,"%"))},dependencies:[s._Y,s.JJ,s.JL,s.sg,s.u,i.oU,i.YG,i.Sm,i.W2,i.Gu,i.I_,i.yW,i.wd,i.sr,i.QI,i.cs],styles:[".title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:28px;letter-spacing:0px;font-weight:700}ion-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(U),p.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.ez,s.u5,s.UX,i.Pc,P]}),n})()}}]);